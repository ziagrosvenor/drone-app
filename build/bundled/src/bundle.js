!function t(e,n,r){function i(u,s){if(!n[u]){if(!e[u]){var a="function"==typeof require&&require;if(!s&&a)return a(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[u]={exports:{}};e[u][0].call(l.exports,function(t){var n=e[u][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[u].exports}for(var o="function"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,e,n){(function(t){(function(){function n(t,e){var n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2];this.obs=t,this.sync=e,this.lazy=n,this.queue=[]}function r(){n.apply(this,arguments)}function i(t){n.call(this,t,!0)}function o(t,e,n){this.context=t,this.method=e,this.args=n}function u(t){this.value=t}function s(){this.id=++nt}function a(t,e){return this instanceof a?(s.call(this),void(!e&&M.isFunction(t)||(null!=t?t._isNext:void 0)?(this.valueF=t,this.valueInternal=void 0):(this.valueF=void 0,this.valueInternal=t))):new a(t,e)}function c(t,e){return this instanceof c?void a.call(this,t,e):new c(t,e)}function l(){return this instanceof l?void s.call(this):new l}function f(t){return this instanceof f?(this.error=t,void s.call(this)):new f(t)}function h(t){this.desc=t,this.id=++st,this.initialDesc=this.desc}function p(){var t=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];this.unsubscribe=M.bind(this.unsubscribe,this),this.unsubscribed=!1,this.subscriptions=[],this.starting=[];for(var e,n=0;n<t.length;n++)e=t[n],this.add(e)}function d(t,e){this._subscribe=t,this._handleEvent=e,this.subscribe=M.bind(this.subscribe,this),this.handleEvent=M.bind(this.handleEvent,this),this.pushing=!1,this.ended=!1,this.prevError=void 0,this.unsubSrc=void 0,this.subscriptions=[],this.queue=[]}function v(t,e,n){return this instanceof v?(M.isFunction(t)&&(n=e,e=t,t=o.empty),h.call(this,t),T(e),this.dispatcher=new d(e,n),void at(this)):new v(t,e,n)}function y(t,e,n){d.call(this,e,n),this.property=t,this.subscribe=M.bind(this.subscribe,this),this.current=tt,this.currentValueRootId=void 0,this.propertyEnded=!1}function _(t,e,n){h.call(this,t),T(e),this.dispatcher=new y(this,e,n),at(this)}function g(){return this instanceof g?(this.unsubAll=M.bind(this.unsubAll,this),this.subscribeAll=M.bind(this.subscribeAll,this),this.guardedSink=M.bind(this.guardedSink,this),this.sink=void 0,this.subscriptions=[],this.ended=!1,void v.call(this,new w.Desc(w,"Bus",[]),this.subscribeAll)):new g}function m(t){return[t,ot()]}var b=Array.prototype.slice,w={toString:function(){return"Bacon"}};w.version="0.7.84";var E=("undefined"!=typeof t&&null!==t?t:this).Error,j=function(){},C=function(t,e){return t},x=function(t){return t.slice(0)},S=function(t,e){if(!e)throw new E(t)},k=function(t){if((null!=t?t._isObservable:void 0)&&!(null!=t?t._isProperty:void 0))throw new E("Observable is not a Property : "+t)},O=function(t){if(!(null!=t?t._isEventStream:void 0))throw new E("not an EventStream : "+t)},A=function(t){if(!(null!=t?t._isObservable:void 0))throw new E("not an Observable : "+t)},T=function(t){return S("not a function : "+t,M.isFunction(t))},P=function(t){return t instanceof Array},F=function(t){return t&&t._isObservable},D=function(t){if(!P(t))throw new E("not an array : "+t)},R=function(t){return S("no arguments supported",0===t.length)},I=function(t){for(var e=arguments.length,n=1;1<e?n<e:n>e;1<e?n++:n--)for(var r in arguments[n])t[r]=arguments[n][r];return t},L=function(t,e){var n={}.hasOwnProperty,r=function(){};r.prototype=e.prototype,t.prototype=new r;for(var i in e)n.call(e,i)&&(t[i]=e[i]);return t},M={indexOf:function(){return Array.prototype.indexOf?function(t,e){return t.indexOf(e)}:function(t,e){for(var n,r=0;r<t.length;r++)if(n=t[r],e===n)return r;return-1}}(),indexWhere:function(t,e){for(var n,r=0;r<t.length;r++)if(n=t[r],e(n))return r;return-1},head:function(t){return t[0]},always:function(t){return function(){return t}},negate:function(t){return function(e){return!t(e)}},empty:function(t){return 0===t.length},tail:function(t){return t.slice(1,t.length)},filter:function(t,e){for(var n,r=[],i=0;i<e.length;i++)n=e[i],t(n)&&r.push(n);return r},map:function(t,e){return function(){for(var n,r=[],i=0;i<e.length;i++)n=e[i],r.push(t(n));return r}()},each:function(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=t[n];e(n,r)}},toArray:function(t){return P(t)?t:[t]},contains:function(t,e){return M.indexOf(t,e)!==-1},id:function(t){return t},last:function(t){return t[t.length-1]},all:function(t){for(var e,n=arguments.length<=1||void 0===arguments[1]?M.id:arguments[1],r=0;r<t.length;r++)if(e=t[r],!n(e))return!1;return!0},any:function(t){for(var e,n=arguments.length<=1||void 0===arguments[1]?M.id:arguments[1],r=0;r<t.length;r++)if(e=t[r],n(e))return!0;return!1},without:function(t,e){return M.filter(function(e){return e!==t},e)},remove:function(t,e){var n=M.indexOf(e,t);if(n>=0)return e.splice(n,1)},fold:function(t,e,n){for(var r,i=0;i<t.length;i++)r=t[i],e=n(e,r);return e},flatMap:function(t,e){return M.fold(e,[],function(e,n){return e.concat(t(n))})},cached:function(t){var e=tt;return function(){return("undefined"!=typeof e&&null!==e?e._isNone:void 0)&&(e=t(),t=void 0),e}},bind:function(t,e){return function(){return t.apply(e,arguments)}},isFunction:function(t){return"function"==typeof t},toString:function(t){var e,n,r,i={}.hasOwnProperty;try{return N++,null==t?"undefined":M.isFunction(t)?"function":P(t)?N>5?"[..]":"["+M.map(M.toString,t).toString()+"]":null!=(null!=t?t.toString:void 0)&&t.toString!==Object.prototype.toString?t.toString():"object"==typeof t?N>5?"{..}":(e=function(){var e=[];for(n in t)i.call(t,n)&&(r=function(){try{return t[n]}catch(t){return t}}(),e.push(M.toString(n)+":"+M.toString(r)));return e}(),"{"+e+"}"):t}finally{N--}}},N=0;w._=M;var B=w.UpdateBarrier=function(){var t,e=[],n={},r=[],i=0,o={},u=function(e){return t?r.push(e):e()},s=function(r,i){if(t){var o=n[r.id];return"undefined"==typeof o||null===o?(o=n[r.id]=[i],e.push(r)):o.push(i)}return i()},a=function(){for(;e.length>0;)c(0,!0);o={}},c=function(t,r){var i=e[t],o=i.id,u=n[o];e.splice(t,1),delete n[o],r&&e.length>0&&l(i);for(var s,a=0;a<u.length;a++)(s=u[a])()},l=function(t){if(!o[t.id]){for(var r,i=t.internalDeps(),u=0;u<i.length;u++)if(r=i[u],l(r),n[r.id]){var s=M.indexOf(e,r);c(s,!1)}o[t.id]=!0}},f=function(e,n,o,u){if(t)return o.apply(n,u);t=e;try{var s=o.apply(n,u);a()}finally{for(t=void 0;i<r.length;){var c=r[i];i++,c()}i=0,r=[]}return s},h=function(){return t?t.id:void 0},p=function(t,e){var n=!1,r=!1,i=function(){return r=!0},o=function(){return n=!0,i()};return i=t.dispatcher.subscribe(function(t){return u(function(){if(!n){var r=e(t);if(r===w.noMore)return o()}})}),r&&i(),o},d=function(){return e.length>0};return{whenDoneWith:s,hasWaiters:d,inTransaction:f,currentEventId:h,wrappedSubscribe:p,afterTransaction:u}}();I(n.prototype,{_isSource:!0,subscribe:function(t){return this.obs.dispatcher.subscribe(t)},toString:function(){return this.obs.toString()},markEnded:function(){return this.ended=!0,!0},consume:function(){return this.lazy?{value:M.always(this.queue[0])}:this.queue[0]},push:function(t){return this.queue=[t],[t]},mayHave:function(){return!0},hasAtLeast:function(){return this.queue.length},flatten:!0}),L(r,n),I(r.prototype,{consume:function(){return this.queue.shift()},push:function(t){return this.queue.push(t)},mayHave:function(t){return!this.ended||this.queue.length>=t},hasAtLeast:function(t){return this.queue.length>=t},flatten:!1}),L(i,n),I(i.prototype,{consume:function(){var t=this.queue;return this.queue=[],{value:function(){return t}}},push:function(t){return this.queue.push(t.value())},hasAtLeast:function(){return!0}}),n.isTrigger=function(t){return(null!=t?t._isSource:void 0)?t.sync:null!=t?t._isEventStream:void 0},n.fromObservable=function(t){return(null!=t?t._isSource:void 0)?t:(null!=t?t._isProperty:void 0)?new n(t,(!1)):new r(t,(!0))},I(o.prototype,{_isDesc:!0,deps:function(){return this.cached||(this.cached=q([this.context].concat(this.args))),this.cached},toString:function(){return M.toString(this.context)+"."+M.toString(this.method)+"("+M.map(M.toString,this.args)+")"}});var U=function(t,e){var n=t||e;if(n&&n._isDesc)return t||e;for(var r=arguments.length,i=Array(r>2?r-2:0),u=2;u<r;u++)i[u-2]=arguments[u];return new o(t,e,i)},H=function(t,e){return e.desc=t,e},q=function(t){return P(t)?M.flatMap(q,t):F(t)?[t]:("undefined"!=typeof t&&null!==t?t._isSource:void 0)?[t.obs]:[]};w.Desc=o,w.Desc.empty=new w.Desc("","",[]);var V=function(t){return function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if("object"==typeof e&&r.length){var o=e,u=r[0];e=function(){return o[u].apply(o,arguments)},r=r.slice(1)}return t.apply(void 0,[e].concat(r))}},W=function(t){return t=Array.prototype.slice.call(t),K.apply(void 0,t)},z=function(t,e){return function(){for(var n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.apply(void 0,e.concat(r))}},G=function(t){return function(e){return function(n){if("undefined"!=typeof n&&null!==n){var r=n[e];return M.isFunction(r)?r.apply(n,t):r}}}},$=function(t,e){var n=t.slice(1).split("."),r=M.map(G(e),n);return function(t){for(var e,n=0;n<r.length;n++)e=r[n],t=e(t);return t}},Q=function(t){return"string"==typeof t&&t.length>1&&"."===t.charAt(0)},K=V(function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return M.isFunction(t)?n.length?z(t,n):t:Q(t)?$(t,n):M.always(t)}),X=function(t,e){return K.apply(void 0,[t].concat(e))},Y=function(t,e,n,r){if("undefined"!=typeof e&&null!==e?e._isProperty:void 0){var i=e.sampledBy(t,function(t,e){return[t,e]});return r.call(i,function(t){var e=t[0];t[1];return e}).map(function(t){var e=(t[0],t[1]);return e})}return e=X(e,n),r.call(t,e)},J=function(t){if(M.isFunction(t))return t;if(Q(t)){var e=Z(t);return function(t,n){return t[e](n)}}throw new E("not a function or a field key: "+t)},Z=function(t){return t.slice(1)};I(u.prototype,{_isSome:!0,getOrElse:function(){return this.value},get:function(){return this.value},filter:function(t){return t(this.value)?new u(this.value):tt},map:function(t){return new u(t(this.value))},forEach:function(t){return t(this.value)},isDefined:!0,toArray:function(){return[this.value]},inspect:function(){return"Some("+this.value+")"},toString:function(){return this.inspect()}});var tt={_isNone:!0,getOrElse:function(t){return t},filter:function(){return tt},map:function(){return tt},forEach:function(){},isDefined:!1,toArray:function(){return[]},inspect:function(){return"None"},toString:function(){return this.inspect()}},et=function(t){return("undefined"!=typeof t&&null!==t?t._isSome:void 0)||("undefined"!=typeof t&&null!==t?t._isNone:void 0)?t:new u(t)};w.noMore="<no-more>",w.more="<more>";var nt=0;s.prototype._isEvent=!0,s.prototype.isEvent=function(){return!0},s.prototype.isEnd=function(){return!1},s.prototype.isInitial=function(){return!1},s.prototype.isNext=function(){return!1},s.prototype.isError=function(){return!1},s.prototype.hasValue=function(){return!1},s.prototype.filter=function(){return!0},s.prototype.inspect=function(){return this.toString()},s.prototype.log=function(){return this.toString()},L(a,s),a.prototype.isNext=function(){return!0},a.prototype.hasValue=function(){return!0},a.prototype.value=function(){var t;return(null!=(t=this.valueF)?t._isNext:void 0)?(this.valueInternal=this.valueF.value(),this.valueF=void 0):this.valueF&&(this.valueInternal=this.valueF(),this.valueF=void 0),this.valueInternal},a.prototype.fmap=function(t){var e,n;return this.valueInternal?(n=this.valueInternal,this.apply(function(){return t(n)})):(e=this,this.apply(function(){return t(e.value())}))},a.prototype.apply=function(t){return new a(t)},a.prototype.filter=function(t){return t(this.value())},a.prototype.toString=function(){return M.toString(this.value())},a.prototype.log=function(){return this.value()},a.prototype._isNext=!0,L(c,a),c.prototype._isInitial=!0,c.prototype.isInitial=function(){return!0},c.prototype.isNext=function(){return!1},c.prototype.apply=function(t){return new c(t)},c.prototype.toNext=function(){return new a(this)},L(l,s),l.prototype.isEnd=function(){return!0},l.prototype.fmap=function(){return this},l.prototype.apply=function(){return this},l.prototype.toString=function(){return"<end>"},L(f,s),f.prototype.isError=function(){return!0},f.prototype.fmap=function(){return this},f.prototype.apply=function(){return this},f.prototype.toString=function(){return"<error> "+M.toString(this.error)},w.Event=s,w.Initial=c,w.Next=a,w.End=l,w.Error=f;var rt=function(t){return new c(t,(!0))},it=function(t){return new a(t,(!0))},ot=function(){return new l},ut=function(t){return t&&t._isEvent?t:it(t)},st=0,at=function(){};I(h.prototype,{_isObservable:!0,subscribe:function(t){return B.wrappedSubscribe(this,t)},subscribeInternal:function(t){return this.dispatcher.subscribe(t)},onValue:function(){var t=W(arguments);return this.subscribe(function(e){if(e.hasValue())return t(e.value())})},onValues:function(t){return this.onValue(function(e){return t.apply(void 0,e)})},onError:function(){var t=W(arguments);return this.subscribe(function(e){if(e.isError())return t(e.error)})},onEnd:function(){var t=W(arguments);return this.subscribe(function(e){if(e.isEnd())return t()})},name:function(t){return this._name=t,this},withDescription:function(){return this.desc=U.apply(void 0,arguments),this},toString:function(){return this._name?this._name:this.desc.toString()},internalDeps:function(){return this.initialDesc.deps()}}),h.prototype.assign=h.prototype.onValue,h.prototype.forEach=h.prototype.onValue,h.prototype.inspect=h.prototype.toString,w.Observable=h,I(p.prototype,{add:function(t){var e=this;if(!this.unsubscribed){var n=!1,r=j;this.starting.push(t);var i=function(){if(!e.unsubscribed)return n=!0,e.remove(r),M.remove(t,e.starting)};return r=t(this.unsubscribe,i),this.unsubscribed||n?r():this.subscriptions.push(r),M.remove(t,this.starting),r}},remove:function(t){if(!this.unsubscribed)return void 0!==M.remove(t,this.subscriptions)?t():void 0},unsubscribe:function(){if(!this.unsubscribed){this.unsubscribed=!0;for(var t=this.subscriptions,e=0;e<t.length;e++)t[e]();return this.subscriptions=[],this.starting=[],[]}},count:function(){return this.unsubscribed?0:this.subscriptions.length+this.starting.length},empty:function(){return 0===this.count()}}),w.CompositeUnsubscribe=p,d.prototype.hasSubscribers=function(){return this.subscriptions.length>0},d.prototype.removeSub=function(t){return this.subscriptions=M.without(t,this.subscriptions),this.subscriptions},d.prototype.push=function(t){return t.isEnd()&&(this.ended=!0),B.inTransaction(t,this,this.pushIt,[t])},d.prototype.pushToSubscriptions=function(t){try{for(var e=this.subscriptions,n=e.length,r=0;r<n;r++){var i=e[r],o=i.sink(t);(o===w.noMore||t.isEnd())&&this.removeSub(i)}return!0}catch(t){throw this.pushing=!1,this.queue=[],t}},d.prototype.pushIt=function(t){if(this.pushing)return this.queue.push(t),w.more;if(t!==this.prevError){for(t.isError()&&(this.prevError=t),this.pushing=!0,this.pushToSubscriptions(t),this.pushing=!1;this.queue.length;)t=this.queue.shift(),this.push(t);return this.hasSubscribers()?w.more:(this.unsubscribeFromSource(),w.noMore)}},d.prototype.handleEvent=function(t){return this._handleEvent?this._handleEvent(t):this.push(t)},d.prototype.unsubscribeFromSource=function(){this.unsubSrc&&this.unsubSrc(),this.unsubSrc=void 0},d.prototype.subscribe=function(t){var e;return this.ended?(t(ot()),j):(T(t),e={sink:t},this.subscriptions.push(e),1===this.subscriptions.length&&(this.unsubSrc=this._subscribe(this.handleEvent),T(this.unsubSrc)),function(t){return function(){if(t.removeSub(e),!t.hasSubscribers())return t.unsubscribeFromSource()}}(this))},w.Dispatcher=d,L(v,h),I(v.prototype,{_isEventStream:!0,toProperty:function(t){var e=0===arguments.length?tt:et(function(){return t}),n=this.dispatcher,r=new w.Desc(this,"toProperty",[t]);return new _(r,function(t){var r=!1,i=!1,o=j,s=w.more,a=function(){if(!r)return e.forEach(function(e){if(r=!0,s=t(new c(e)),s===w.noMore)return o(),o=j,j})};return o=n.subscribe(function(n){return n.hasValue()?n.isInitial()&&!i?(e=new u(function(){return n.value()}),w.more):(n.isInitial()||a(),r=!0,e=new u(n),t(n)):(n.isEnd()&&(s=a()),s!==w.noMore?t(n):void 0)}),i=!0,a(),o})},toEventStream:function(){return this},withHandler:function(t){return new v(new w.Desc(this,"withHandler",[t]),this.dispatcher.subscribe,t)}}),w.EventStream=v,w.never=function(){return new v(U(w,"never"),function(t){return t(ot()),j})},w.when=function(){if(0===arguments.length)return w.never();var t=arguments.length,e="when: expecting arguments in the form (Observable+,function)+";S(e,t%2===0);for(var r=[],i=[],o=0,u=[];o<t;){u[o]=arguments[o],u[o+1]=arguments[o+1];for(var s,a=M.toArray(arguments[o]),c=lt(arguments[o+1]),l={f:c,ixs:[]},f=!1,h=0;h<a.length;h++){s=a[h];var p=M.indexOf(r,s);f||(f=n.isTrigger(s)),p<0&&(r.push(s),p=r.length-1);for(var d,y=0;y<l.ixs.length;y++)d=l.ixs[y],d.index===p&&d.count++;l.ixs.push({index:p,count:1})}S("At least one EventStream required",f||!a.length),a.length>0&&i.push(l),o+=2}if(!r.length)return w.never();r=M.map(n.fromObservable,r);var _=M.any(r,function(t){return t.flatten})&&ct(M.map(function(t){return t.obs},r)),g=new w.Desc(w,"when",u),m=new v(g,function(t){var e=[],n=!1,o=function(t){for(var e,n=0;n<t.ixs.length;n++)if(e=t.ixs[n],!r[e.index].hasAtLeast(e.count))return!1;return!0},u=function(t){return!t.sync||t.ended},s=function(t){for(var e,n=0;n<t.ixs.length;n++)if(e=t.ixs[n],!r[e.index].mayHave(e.count))return!0},a=function(t){return!t.source.flatten},c=function(c){return function(l){var f=function(){return B.whenDoneWith(m,p)},h=function(){if(!(e.length>0))return w.more;for(var n,u=w.more,s=e.pop(),c=0;c<i.length;c++)if(n=i[c],o(n)){var l=function(){for(var t,e=[],i=0;i<n.ixs.length;i++)t=n.ixs[i],e.push(r[t.index].consume());return e}();return u=t(s.e.apply(function(){var t,e=function(){for(var t,e=[],n=0;n<l.length;n++)t=l[n],e.push(t.value());return e}();return(t=n).f.apply(t,e)})),e.length&&(e=M.filter(a,e)),u===w.noMore?u:h()}},p=function(){var e=h();return n&&(M.all(r,u)||M.all(i,s))&&(e=w.noMore,t(ot())),e===w.noMore&&l(),e};return c.subscribe(function(r){if(r.isEnd())n=!0,c.markEnded(),f();else if(r.isError())var i=t(r);else c.push(r),c.sync&&(e.push({source:c,e:r}),_||B.hasWaiters()?f():p());return i===w.noMore&&l(),i||w.more})}};return new w.CompositeUnsubscribe(function(){for(var t,e=[],n=0;n<r.length;n++)t=r[n],e.push(c(t));return e}()).unsubscribe});return m};var ct=function(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],n=function(t){if(M.contains(e,t))return!0;var r=t.internalDeps();return r.length?(e.push(t),M.any(r,n)):(e.push(t),!1)};return M.any(t,n)},lt=function(t){return M.isFunction(t)?t:M.always(t)};w.groupSimultaneous=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];1===e.length&&P(e[0])&&(e=e[0]);var r=function(){for(var t,n=[],r=0;r<e.length;r++)t=e[r],n.push(new i(t));return n}();return H(new w.Desc(w,"groupSimultaneous",e),w.when(r,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}))},L(y,d),I(y.prototype,{push:function(t){return t.isEnd()&&(this.propertyEnded=!0),t.hasValue()&&(this.current=new u(t),this.currentValueRootId=B.currentEventId()),d.prototype.push.call(this,t)},maybeSubSource:function(t,e){return e===w.noMore?j:this.propertyEnded?(t(ot()),j):d.prototype.subscribe.call(this,t)},subscribe:function(t){var e=this,n=w.more;if(this.current.isDefined&&(this.hasSubscribers()||this.propertyEnded)){var r=B.currentEventId(),i=this.currentValueRootId;return!this.propertyEnded&&i&&r&&r!==i?(B.whenDoneWith(this.property,function(){if(e.currentValueRootId===i)return t(rt(e.current.get().value()))}),this.maybeSubSource(t,n)):(B.inTransaction(void 0,this,function(){return n=t(rt(this.current.get().value()))},[]),this.maybeSubSource(t,n))}return this.maybeSubSource(t,n)}}),L(_,h),I(_.prototype,{_isProperty:!0,changes:function(){var t=this;return new v(new w.Desc(this,"changes",[]),function(e){return t.dispatcher.subscribe(function(t){if(!t.isInitial())return e(t)})})},withHandler:function(t){return new _(new w.Desc(this,"withHandler",[t]),this.dispatcher.subscribe,t)},toProperty:function(){return R(arguments),this},toEventStream:function(){var t=this;return new v(new w.Desc(this,"toEventStream",[]),function(e){return t.dispatcher.subscribe(function(t){return t.isInitial()&&(t=t.toNext()),e(t)})})}}),w.Property=_,w.constant=function(t){return new _(new w.Desc(w,"constant",[t]),function(e){return e(rt(t)),e(ot()),j})},w.fromBinder=function(t){var e=arguments.length<=1||void 0===arguments[1]?M.id:arguments[1],n=new w.Desc(w,"fromBinder",[t,e]);return new v(n,function(n){var r=!1,i=!1,o=function(){if(!r)return"undefined"!=typeof u&&null!==u?(u(),r=!0):i=!0},u=t(function(){for(var t,r=arguments.length,i=Array(r),u=0;u<r;u++)i[u]=arguments[u];var s=e.apply(this,i);P(s)&&(null!=(t=M.last(s))?t._isEvent:void 0)||(s=[s]);for(var a,c=w.more,l=0;l<s.length;l++)if(a=s[l],c=n(a=ut(a)),c===w.noMore||a.isEnd())return o(),c;return c});return i&&o(),o})},w.Observable.prototype.map=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y(this,t,n,function(t){return H(new w.Desc(this,"map",[t]),this.withHandler(function(e){return this.push(e.fmap(t))}))})};var ft=function(t){return P(t[0])?t[0]:Array.prototype.slice.call(t)},ht=function(t){return M.isFunction(t[0])?[ft(Array.prototype.slice.call(t,1)),t[0]]:[ft(Array.prototype.slice.call(t,0,t.length-1)),M.last(t)]};w.combineAsArray=function(){for(var t,e=ft(arguments),r=0;r<e.length;r++)t=e[r],F(t)||(e[r]=w.constant(t));if(e.length){var i=function(){for(var t,r=[],i=0;i<e.length;i++)t=e[i],r.push(new n(t,(!0)));return r}();return H(new w.Desc(w,"combineAsArray",e),w.when(i,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}).toProperty())}return w.constant([])},w.onValues=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return w.combineAsArray(e.slice(0,e.length-1)).onValues(e[e.length-1])},w.combineWith=function(){var t=ht(arguments),e=t[0],n=t[1],r=new w.Desc(w,"combineWith",[n].concat(e));return H(r,w.combineAsArray(e).map(function(t){return n.apply(void 0,t)}))},w.Observable.prototype.combine=function(t,e){var n=J(e),r=new w.Desc(this,"combine",[t,e]);return H(r,w.combineAsArray(this,t).map(function(t){return n(t[0],t[1])}))},w.Observable.prototype.withStateMachine=function(t,e){var n=t,r=new w.Desc(this,"withStateMachine",[t,e]);return H(r,this.withHandler(function(t){var r=e(n,t),i=r[0],o=r[1];n=i;for(var u,s=w.more,a=0;a<o.length;a++)if(u=o[a],s=this.push(u),s===w.noMore)return s;return s}))};var pt=function(t,e){return t===e},dt=function(t){return"undefined"!=typeof t&&null!==t&&t._isNone};w.Observable.prototype.skipDuplicates=function(){var t=arguments.length<=0||void 0===arguments[0]?pt:arguments[0],e=new w.Desc(this,"skipDuplicates",[]);return H(e,this.withStateMachine(tt,function(e,n){return n.hasValue()?n.isInitial()||dt(e)||!t(e.get(),n.value())?[new u(n.value()),[n]]:[e,[]]:[e,[n]]}))},w.Observable.prototype.awaiting=function(t){var e=new w.Desc(this,"awaiting",[t]);return H(e,w.groupSimultaneous(this,t).map(function(t){return 0===t[1].length}).toProperty(!1).skipDuplicates())},w.Observable.prototype.not=function(){return H(new w.Desc(this,"not",[]),this.map(function(t){return!t}))},w.Property.prototype.and=function(t){return H(new w.Desc(this,"and",[t]),this.combine(t,function(t,e){return t&&e}))},w.Property.prototype.or=function(t){return H(new w.Desc(this,"or",[t]),this.combine(t,function(t,e){return t||e}))},w.scheduler={setTimeout:function(t,e){return setTimeout(t,e)},setInterval:function(t,e){return setInterval(t,e)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},now:function(){return(new Date).getTime()}},w.EventStream.prototype.bufferWithTime=function(t){return H(new w.Desc(this,"bufferWithTime",[t]),this.bufferWithTimeOrCount(t,Number.MAX_VALUE))},w.EventStream.prototype.bufferWithCount=function(t){return H(new w.Desc(this,"bufferWithCount",[t]),this.bufferWithTimeOrCount(void 0,t))},w.EventStream.prototype.bufferWithTimeOrCount=function(t,e){var n=function(n){return n.values.length===e?n.flush():void 0!==t?n.schedule():void 0},r=new w.Desc(this,"bufferWithTimeOrCount",[t,e]);return H(r,this.buffer(t,n,n))},w.EventStream.prototype.buffer=function(t){var e=arguments.length<=1||void 0===arguments[1]?j:arguments[1],n=arguments.length<=2||void 0===arguments[2]?j:arguments[2],r={scheduled:null,end:void 0,values:[],flush:function(){if(this.scheduled&&(w.scheduler.clearTimeout(this.scheduled),this.scheduled=null),this.values.length>0){var t=this.values;this.values=[];var e=this.push(it(t));if(null!=this.end)return this.push(this.end);if(e!==w.noMore)return n(this)}else if(null!=this.end)return this.push(this.end)},schedule:function(){var e=this;if(!this.scheduled)return this.scheduled=t(function(){return e.flush()})}},i=w.more;if(!M.isFunction(t)){var o=t;t=function(t){return w.scheduler.setTimeout(t,o)}}return H(new w.Desc(this,"buffer",[]),this.withHandler(function(t){var n=this;return r.push=function(t){return n.push(t)},t.isError()?i=this.push(t):t.isEnd()?(r.end=t,r.scheduled||r.flush()):(r.values.push(t.value()),e(r)),i}))},w.Observable.prototype.filter=function(t){k(t);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y(this,t,n,function(t){return H(new w.Desc(this,"filter",[t]),this.withHandler(function(e){return e.filter(t)?this.push(e):w.more}))})},w.once=function(t){return new v(new o(w,"once",[t]),function(e){return e(ut(t)),e(ot()),j})},w.EventStream.prototype.concat=function(t){var e=this;return new v(new w.Desc(e,"concat",[t]),function(n){var r=j,i=e.dispatcher.subscribe(function(e){return e.isEnd()?r=t.dispatcher.subscribe(n):n(e)});return function(){return i(),r()}})},w.Observable.prototype.flatMap=function(){return _t(this,vt(arguments))},w.Observable.prototype.flatMapFirst=function(){return _t(this,vt(arguments),!0)};var vt=function(t){return 1===t.length&&F(t[0])?M.always(t[0]):W(t)},yt=function(t){return F(t)?t:w.once(t)},_t=function(t,e,n,r){var i=[t],o=[],u=new w.Desc(t,"flatMap"+(n?"First":""),[e]),s=new v(u,function(i){var u=new p,s=[],a=function(t){var n=yt(e(t.value()));return o.push(n),u.add(function(t,e){return n.dispatcher.subscribe(function(r){if(r.isEnd())return M.remove(n,o),c(),l(e),w.noMore;("undefined"!=typeof r&&null!==r?r._isInitial:void 0)&&(r=r.toNext());var u=i(r);return u===w.noMore&&t(),u})})},c=function(){var t=s.shift();if(t)return a(t)},l=function(t){if(t(),u.empty())return i(ot())};return u.add(function(e,o){return t.dispatcher.subscribe(function(t){return t.isEnd()?l(o):t.isError()?i(t):n&&u.count()>1?w.more:u.unsubscribed?w.noMore:r&&u.count()>r?s.push(t):a(t)})}),u.unsubscribe});return s.internalDeps=function(){return o.length?i.concat(o):i},s};w.Observable.prototype.flatMapWithConcurrencyLimit=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=new w.Desc(this,"flatMapWithConcurrencyLimit",[t].concat(n));return H(i,_t(this,vt(n),!1,t))},w.Observable.prototype.flatMapConcat=function(){var t=new w.Desc(this,"flatMapConcat",Array.prototype.slice.call(arguments,0));return H(t,this.flatMapWithConcurrencyLimit.apply(this,[1].concat(b.call(arguments))))},w.later=function(t,e){return H(new w.Desc(w,"later",[t,e]),w.fromBinder(function(n){var r=function(){return n([e,ot()])},i=w.scheduler.setTimeout(r,t);return function(){return w.scheduler.clearTimeout(i)}}))},w.Observable.prototype.bufferingThrottle=function(t){var e=new w.Desc(this,"bufferingThrottle",[t]);return H(e,this.flatMapConcat(function(e){return w.once(e).concat(w.later(t).filter(!1))}))},w.Property.prototype.bufferingThrottle=function(){return w.Observable.prototype.bufferingThrottle.apply(this,arguments).toProperty()},L(g,v),I(g.prototype,{unsubAll:function(){for(var t,e=this.subscriptions,n=0;n<e.length;n++)t=e[n],"function"==typeof t.unsub&&t.unsub()},subscribeAll:function(t){if(this.ended)t(ot());else{this.sink=t;for(var e,n=x(this.subscriptions),r=0;r<n.length;r++)e=n[r],this.subscribeInput(e)}return this.unsubAll},guardedSink:function(t){var e=this;return function(n){return n.isEnd()?(e.unsubscribeInput(t),w.noMore):e.sink(n)}},subscribeInput:function(t){return t.unsub=t.input.dispatcher.subscribe(this.guardedSink(t.input)),t.unsub},unsubscribeInput:function(t){for(var e,n=this.subscriptions,r=0;r<n.length;r++)if(e=n[r],e.input===t)return"function"==typeof e.unsub&&e.unsub(),void this.subscriptions.splice(r,1)},plug:function(t){var e=this;if(A(t),!this.ended){var n={input:t};return this.subscriptions.push(n),"undefined"!=typeof this.sink&&this.subscribeInput(n),function(){return e.unsubscribeInput(t)}}},end:function(){if(this.ended=!0,this.unsubAll(),"function"==typeof this.sink)return this.sink(ot())},push:function(t){if(!this.ended&&"function"==typeof this.sink)return this.sink(it(t))},error:function(t){if("function"==typeof this.sink)return this.sink(new f(t))}}),w.Bus=g;var gt=function(t,e){return V(function(n){for(var r=z(e,[function(t,e){return n.apply(void 0,t.concat([e]))}]),i=arguments.length,o=Array(i>1?i-1:0),u=1;u<i;u++)o[u-1]=arguments[u];return H(new w.Desc(w,t,[n].concat(o)),w.combineAsArray(o).flatMap(r))})};w.fromCallback=gt("fromCallback",function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return w.fromBinder(function(e){return X(t,n)(e),j},function(t){return[t,ot()]})}),w.fromNodeCallback=gt("fromNodeCallback",function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return w.fromBinder(function(e){return X(t,n)(e),j},function(t,e){return t?[new f(t),ot()]:[e,ot()]})}),w.combineTemplate=function(t){function e(t){return t[t.length-1]}function n(t,n,r){return e(t)[n]=r,r}function r(t,e){return function(r,i){return n(r,t,i[e])}}function i(t,e){return function(r){return n(r,t,e)}}function o(t){return P(t)?[]:{}}function u(t,e){return function(r){var i=o(e);return n(r,t,i),r.push(i)}}function s(t,e){if(F(e))return f.push(e),l.push(r(t,f.length-1));if(!e||e.constructor!=Object&&e.constructor!=Array)return l.push(i(t,e));var n=function(t){return t.pop()};return l.push(u(t,e)),c(e),l.push(n)}function a(e){for(var n,r=o(t),i=[r],u=0;u<l.length;u++)(n=l[u])(i,e);return r}function c(t){return M.each(t,s)}var l=[],f=[];return c(t),H(new w.Desc(w,"combineTemplate",[t]),w.combineAsArray(f).map(a))};var mt=function(t,e){var n=new v(U(t,"justInitValue"),function(e){var r=void 0,i=t.dispatcher.subscribe(function(t){return t.isEnd()||(r=t),w.noMore});return B.whenDoneWith(n,function(){return"undefined"!=typeof r&&null!==r&&e(r),e(ot())}),i});return n.concat(e).toProperty()};w.Observable.prototype.mapEnd=function(){var t=W(arguments);return H(new w.Desc(this,"mapEnd",[t]),this.withHandler(function(e){return e.isEnd()?(this.push(it(t(e))),this.push(ot()),w.noMore):this.push(e)}))},w.Observable.prototype.skipErrors=function(){return H(new w.Desc(this,"skipErrors",[]),this.withHandler(function(t){return t.isError()?w.more:this.push(t)}))},w.EventStream.prototype.takeUntil=function(t){var e={};return H(new w.Desc(this,"takeUntil",[t]),w.groupSimultaneous(this.mapEnd(e),t.skipErrors()).withHandler(function(t){if(t.hasValue()){var n=t.value(),r=n[0],i=n[1];if(i.length)return this.push(ot());for(var o,u=w.more,s=0;s<r.length;s++)o=r[s],u=o===e?this.push(ot()):this.push(it(o));return u}return this.push(t)}))},w.Property.prototype.takeUntil=function(t){var e=this.changes().takeUntil(t);return H(new w.Desc(this,"takeUntil",[t]),mt(this,e))},w.Observable.prototype.flatMapLatest=function(){var t=vt(arguments),e=this.toEventStream();
return H(new w.Desc(this,"flatMapLatest",[t]),e.flatMap(function(n){return yt(t(n)).takeUntil(e)}))},w.Property.prototype.delayChanges=function(t,e){return H(t,mt(this,e(this.changes())))},w.EventStream.prototype.delay=function(t){return H(new w.Desc(this,"delay",[t]),this.flatMap(function(e){return w.later(t,e)}))},w.Property.prototype.delay=function(t){return this.delayChanges(new w.Desc(this,"delay",[t]),function(e){return e.delay(t)})},w.EventStream.prototype.debounce=function(t){return H(new w.Desc(this,"debounce",[t]),this.flatMapLatest(function(e){return w.later(t,e)}))},w.Property.prototype.debounce=function(t){return this.delayChanges(new w.Desc(this,"debounce",[t]),function(e){return e.debounce(t)})},w.EventStream.prototype.debounceImmediate=function(t){return H(new w.Desc(this,"debounceImmediate",[t]),this.flatMapFirst(function(e){return w.once(e).concat(w.later(t).filter(!1))}))},w.Observable.prototype.decode=function(t){return H(new w.Desc(this,"decode",[t]),this.combine(w.combineTemplate(t),function(t,e){return e[t]}))},w.Observable.prototype.scan=function(t,e){var n,r=this;e=J(e);var i=et(t),o=!1,s=function(t){var s=!1,a=j,l=w.more,f=function(){if(!s)return i.forEach(function(e){if(s=o=!0,l=t(new c(function(){return e})),l===w.noMore)return a(),a=j})};return a=r.dispatcher.subscribe(function(n){if(n.hasValue()){if(o&&n.isInitial())return w.more;n.isInitial()||f(),s=o=!0;var r=i.getOrElse(void 0),a=e(r,n.value());return i=new u(a),t(n.apply(function(){return a}))}if(n.isEnd()&&(l=f()),l!==w.noMore)return t(n)}),B.whenDoneWith(n,f),a};return n=new _(new w.Desc(this,"scan",[t,e]),s)},w.Observable.prototype.diff=function(t,e){return e=J(e),H(new w.Desc(this,"diff",[t,e]),this.scan([t],function(t,n){return[n,e(t[0],n)]}).filter(function(t){return 2===t.length}).map(function(t){return t[1]}))},w.Observable.prototype.doAction=function(){var t=W(arguments);return H(new w.Desc(this,"doAction",[t]),this.withHandler(function(e){return e.hasValue()&&t(e.value()),this.push(e)}))},w.Observable.prototype.doEnd=function(){var t=W(arguments);return H(new w.Desc(this,"doEnd",[t]),this.withHandler(function(e){return e.isEnd()&&t(),this.push(e)}))},w.Observable.prototype.doError=function(){var t=W(arguments);return H(new w.Desc(this,"doError",[t]),this.withHandler(function(e){return e.isError()&&t(e.error),this.push(e)}))},w.Observable.prototype.doLog=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return H(new w.Desc(this,"doLog",e),this.withHandler(function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log&&console.log.apply(console,e.concat([t.log()])),this.push(t)}))},w.Observable.prototype.endOnError=function(t){"undefined"!=typeof t&&null!==t||(t=!0);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y(this,t,n,function(t){return H(new w.Desc(this,"endOnError",[]),this.withHandler(function(e){return e.isError()&&t(e.error)?(this.push(e),this.push(ot())):this.push(e)}))})},h.prototype.errors=function(){return H(new w.Desc(this,"errors",[]),this.filter(function(){return!1}))},w.Observable.prototype.take=function(t){return t<=0?w.never():H(new w.Desc(this,"take",[t]),this.withHandler(function(e){return e.hasValue()?(t--,t>0?this.push(e):(0===t&&this.push(e),this.push(ot()),w.noMore)):this.push(e)}))},w.Observable.prototype.first=function(){return H(new w.Desc(this,"first",[]),this.take(1))},w.Observable.prototype.mapError=function(){var t=W(arguments);return H(new w.Desc(this,"mapError",[t]),this.withHandler(function(e){return e.isError()?this.push(it(t(e.error))):this.push(e)}))},w.Observable.prototype.flatMapError=function(t){var e=new w.Desc(this,"flatMapError",[t]);return H(e,this.mapError(function(t){return new f(t)}).flatMap(function(e){return e instanceof f?t(e.error):w.once(e)}))},w.EventStream.prototype.sampledBy=function(t,e){return H(new w.Desc(this,"sampledBy",[t,e]),this.toProperty().sampledBy(t,e))},w.Property.prototype.sampledBy=function(t,e){var r=!1;"undefined"!=typeof e&&null!==e?e=J(e):(r=!0,e=function(t){return t.value()});var i=new n(this,(!1),r),o=new n(t,(!0),r),u=w.when([i,o],e),s=t._isProperty?u.toProperty():u;return H(new w.Desc(this,"sampledBy",[t,e]),s)},w.Property.prototype.sample=function(t){return H(new w.Desc(this,"sample",[t]),this.sampledBy(w.interval(t,{})))},w.Observable.prototype.map=function(t){if(t&&t._isProperty)return t.sampledBy(this,C);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y(this,t,n,function(t){return H(new w.Desc(this,"map",[t]),this.withHandler(function(e){return this.push(e.fmap(t))}))})},w.Observable.prototype.fold=function(t,e){return H(new w.Desc(this,"fold",[t,e]),this.scan(t,e).sampledBy(this.filter(!1).mapEnd().toProperty()))},h.prototype.reduce=h.prototype.fold;var bt=[["addEventListener","removeEventListener"],["addListener","removeListener"],["on","off"],["bind","unbind"]],wt=function(t){for(var e,n=0;n<bt.length;n++){e=bt[n];var r=[t[e[0]],t[e[1]]];if(r[0]&&r[1])return r}for(var i=0;i<bt.length;i++){e=bt[i];var o=t[e[0]];if(o)return[o,function(){}]}throw new f("No suitable event methods in "+t)};w.fromEventTarget=function(t,e,n){var r=wt(t),i=r[0],o=r[1],u=new w.Desc(w,"fromEvent",[t,e]);return H(u,w.fromBinder(function(n){return i.call(t,e,n),function(){return o.call(t,e,n)}},n))},w.fromEvent=w.fromEventTarget,w.fromPoll=function(t,e){var n=new w.Desc(w,"fromPoll",[t,e]);return H(n,w.fromBinder(function(e){var n=w.scheduler.setInterval(e,t);return function(){return w.scheduler.clearInterval(n)}},e))},w.fromPromise=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?m:arguments[2];return H(new w.Desc(w,"fromPromise",[t]),w.fromBinder(function(n){var r=t.then(n,function(t){return n(new f(t))});return r&&"function"==typeof r.done&&r.done(),e?function(){if("function"==typeof t.abort)return t.abort()}:function(){}},n))},w.Observable.prototype.groupBy=function(t){var e=arguments.length<=1||void 0===arguments[1]?w._.id:arguments[1],n={},r=this;return r.filter(function(e){return!n[t(e)]}).map(function(i){var o=t(i),u=r.filter(function(e){return t(e)===o}),s=w.once(i).concat(u),a=e(s,i).withHandler(function(t){if(this.push(t),t.isEnd())return delete n[o]});return n[o]=a,a})},w.fromArray=function(t){if(D(t),t.length){var e=0;return new v(new w.Desc(w,"fromArray",[t]),function(n){var r=!1,i=w.more,o=!1,u=!1,s=function(){if(u=!0,!o){for(o=!0;u;)if(u=!1,i!==w.noMore&&!r){var a=t[e++];i=n(ut(a)),i!==w.noMore&&(e===t.length?n(ot()):B.afterTransaction(s))}return o=!1}};return s(),function(){return r=!0}})}return H(new w.Desc(w,"fromArray",t),w.never())},w.EventStream.prototype.holdWhen=function(t){var e=!1,n=[],r=this,i=!1;return new v(new w.Desc(this,"holdWhen",[t]),function(o){var u=new p,s=!1,a=function(t){if("function"==typeof t&&t(),u.empty()&&s)return o(ot())};return u.add(function(r,u){return t.subscribeInternal(function(t){if(!t.hasValue())return t.isEnd()?a(u):o(t);if(e=t.value(),!e){var r=n;return n=[],function(){for(var t,e=[],n=0;n<r.length;n++)t=r[n],e.push(o(it(t)));return i&&(e.push(o(ot())),u()),e}()}})}),u.add(function(t,u){return r.subscribeInternal(function(t){return e&&t.hasValue()?n.push(t.value()):t.isEnd()&&n.length?(i=!0,a(u)):o(t)})}),s=!0,a(),u.unsubscribe})},w.interval=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return H(new w.Desc(w,"interval",[t,e]),w.fromPoll(t,function(){return it(e)}))},w.$={},w.$.asEventStream=function(t,e,n){var r=this;return M.isFunction(e)&&(n=e,e=void 0),H(new w.Desc(this.selector||this,"asEventStream",[t]),w.fromBinder(function(n){return r.on(t,e,n),function(){return r.off(t,e,n)}},n))},"undefined"!=typeof jQuery&&jQuery&&(jQuery.fn.asEventStream=w.$.asEventStream),"undefined"!=typeof Zepto&&Zepto&&(Zepto.fn.asEventStream=w.$.asEventStream),w.Observable.prototype.last=function(){var t;return H(new w.Desc(this,"last",[]),this.withHandler(function(e){return e.isEnd()?(t&&this.push(t),this.push(ot()),w.noMore):void(t=e)}))},w.Observable.prototype.log=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return this.subscribe(function(t){"undefined"!=typeof console&&"function"==typeof console.log&&console.log.apply(console,e.concat([t.log()]))}),this},w.EventStream.prototype.merge=function(t){O(t);var e=this;return H(new w.Desc(e,"merge",[t]),w.mergeAll(this,t))},w.mergeAll=function(){var t=ft(arguments);return t.length?new v(new w.Desc(w,"mergeAll",t),function(e){var n=0,r=function(r){return function(i){return r.dispatcher.subscribe(function(r){if(r.isEnd())return n++,n===t.length?e(ot()):w.more;var o=e(r);return o===w.noMore&&i(),o})}},i=M.map(r,t);return new w.CompositeUnsubscribe(i).unsubscribe}):w.never()},w.repeatedly=function(t,e){var n=0;return H(new w.Desc(w,"repeatedly",[t,e]),w.fromPoll(t,function(){return e[n++%e.length]}))},w.repeat=function(t){var e=0;return w.fromBinder(function(n){function r(t){return t.isEnd()?o?i():o=!0:u=n(t)}function i(){var i;for(o=!0;o&&u!==w.noMore;)i=t(e++),o=!1,i?s=i.subscribeInternal(r):n(ot());return o=!0}var o=!1,u=w.more,s=function(){};return i(),function(){return s()}})},w.retry=function(t){if(!M.isFunction(t.source))throw new E("'source' option has to be a function");var e=t.source,n=t.retries||0,r=t.maxRetries||n,i=t.delay||function(){return 0},o=t.isRetryable||function(){return!0},u=!1,s=null;return H(new w.Desc(w,"retry",[t]),w.repeat(function(){function t(){return e().endOnError().withHandler(function(t){return t.isError()?(s=t,o(s.error)&&n>0?void 0:(u=!0,this.push(t))):(t.hasValue()&&(s=null,u=!0),this.push(t))})}if(u)return null;if(s){var a={error:s.error,retriesDone:r-n},c=w.later(i(a)).filter(!1);return n-=1,c.concat(w.once().flatMap(t))}return t()}))},w.sequentially=function(t,e){var n=0;return H(new w.Desc(w,"sequentially",[t,e]),w.fromPoll(t,function(){var t=e[n++];return n<e.length?t:n===e.length?[t,ot()]:ot()}))},w.Observable.prototype.skip=function(t){return H(new w.Desc(this,"skip",[t]),this.withHandler(function(e){return e.hasValue()&&t>0?(t--,w.more):this.push(e)}))},w.EventStream.prototype.skipUntil=function(t){var e=t.take(1).map(!0).toProperty(!1);return H(new w.Desc(this,"skipUntil",[t]),this.filter(e))},w.EventStream.prototype.skipWhile=function(t){k(t);for(var e=!1,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Y(this,t,r,function(t){return H(new w.Desc(this,"skipWhile",[t]),this.withHandler(function(n){return!e&&n.hasValue()&&t(n.value())?w.more:(n.hasValue()&&(e=!0),this.push(n))}))})},w.Observable.prototype.slidingWindow=function(t){var e=arguments.length<=1||void 0===arguments[1]?0:arguments[1];return H(new w.Desc(this,"slidingWindow",[t,e]),this.scan([],function(e,n){return e.concat([n]).slice(-t)}).filter(function(t){return t.length>=e}))};var Et=[],at=function(t){if(Et.length&&!at.running)try{at.running=!0,Et.forEach(function(e){e(t)})}finally{delete at.running}};w.spy=function(t){return Et.push(t)},w.Property.prototype.startWith=function(t){return H(new w.Desc(this,"startWith",[t]),this.scan(t,function(t,e){return e}))},w.EventStream.prototype.startWith=function(t){return H(new w.Desc(this,"startWith",[t]),w.once(t).concat(this))},w.Observable.prototype.takeWhile=function(t){k(t);for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return Y(this,t,n,function(t){return H(new w.Desc(this,"takeWhile",[t]),this.withHandler(function(e){return e.filter(t)?this.push(e):(this.push(ot()),w.noMore)}))})},w.EventStream.prototype.throttle=function(t){return H(new w.Desc(this,"throttle",[t]),this.bufferWithTime(t).map(function(t){return t[t.length-1]}))},w.Property.prototype.throttle=function(t){return this.delayChanges(new w.Desc(this,"throttle",[t]),function(e){return e.throttle(t)})},h.prototype.firstToPromise=function(t){var e=this;if("function"!=typeof t){if("function"!=typeof Promise)throw new E("There isn't default Promise, use shim or parameter");t=Promise}return new t(function(t,n){return e.subscribe(function(e){return e.hasValue()&&t(e.value()),e.isError()&&n(e.error),w.noMore})})},h.prototype.toPromise=function(t){return this.last().firstToPromise(t)},w.try=function(t){return function(e){try{return w.once(t(e))}catch(t){return new w.Error(t)}}},w.update=function(t){function e(t){return function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return function(e){return t.apply(void 0,[e].concat(n))}}}for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];for(var o=r.length-1;o>0;)r[o]instanceof Function||(r[o]=M.always(r[o])),r[o]=e(r[o]),o-=2;return H(new w.Desc(w,"update",[t].concat(r)),w.when.apply(w,r).scan(t,function(t,e){return e(t)}))},w.zipAsArray=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ft(e);return H(new w.Desc(w,"zipAsArray",r),w.zipWith(r,function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e}))},w.zipWith=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=ht(e),i=r[0],o=r[1];return i=M.map(function(t){return t.toEventStream()},i),H(new w.Desc(w,"zipWith",[o].concat(i)),w.when(i,o))},w.Observable.prototype.zip=function(t,e){return H(new w.Desc(this,"zip",[t]),w.zipWith([this,t],e||Array))},"undefined"!=typeof define&&null!==define&&null!=define.amd?(define([],function(){return w}),"undefined"!=typeof this&&null!==this&&(this.Bacon=w)):"undefined"!=typeof e&&null!==e&&null!=e.exports?(e.exports=w,w.Bacon=w):this.Bacon=w}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(t,e,n){(function(t,r){!function(t){if("object"==typeof n&&"undefined"!=typeof e)e.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i;"undefined"!=typeof window?i=window:"undefined"!=typeof r?i=r:"undefined"!=typeof self&&(i=self),i.Promise=t()}}(function(){var e,n,i;return function t(e,n,r){function i(u,s){if(!n[u]){if(!e[u]){var a="function"==typeof _dereq_&&_dereq_;if(!s&&a)return a(u,!0);if(o)return o(u,!0);var c=new Error("Cannot find module '"+u+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[u]={exports:{}};e[u][0].call(l.exports,function(t){var n=e[u][1][t];return i(n?n:t)},l,l.exports,t,e,n,r)}return n[u].exports}for(var o="function"==typeof _dereq_&&_dereq_,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,e,n){"use strict";e.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},{}],2:[function(e,n,r){"use strict";function i(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new l(16),this._normalQueue=new l(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=c}function o(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function u(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function s(t){this._normalQueue._pushOne(t),this._queueTick()}var a;try{throw new Error}catch(t){a=t}var c=e("./schedule"),l=e("./queue"),f=e("./util");i.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},i.prototype.hasCustomScheduler=function(){return this._customScheduler},i.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},i.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},i.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},i.prototype.fatalError=function(e,n){n?(t.stderr.write("Fatal "+(e instanceof Error?e.stack:e)+"\n"),t.exit(2)):this.throwLater(e)},i.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(i.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},i.prototype.invoke=function(t,e,n){this._trampolineEnabled?u.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},i.prototype.settlePromises=function(t){this._trampolineEnabled?s.call(this,t):this._schedule(function(){t._settlePromises()})}):(i.prototype.invokeLater=o,i.prototype.invoke=u,i.prototype.settlePromises=s),i.prototype.invokeFirst=function(t,e,n){this._normalQueue.unshift(t,e,n),this._queueTick()},i.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},i.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},i.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},i.prototype._reset=function(){this._isTickUsed=!1},n.exports=i,n.exports.firstLineError=a},{"./queue":26,"./schedule":29,"./util":36}],3:[function(t,e,n){"use strict";e.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},u=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},s=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},a=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(o),l=new t(e);l._propagateFrom(this,1);var f=this._target();if(l._setBoundTo(c),c instanceof t){var h={promiseRejectionQueued:!1,promise:l,target:f,bindingPromise:c};f._then(e,u,void 0,l,h),c._then(s,a,void 0,l,h),l._setOnCancel(c)}else l._resolveCallback(f);return l},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=this._bitField&-2097153},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},{}],4:[function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=t("./promise")();o.noConflict=r,e.exports=o},{"./promise":22}],5:[function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}e.exports=function(e){function n(t,n){var r;if(null!=t&&(r=t[n]),"function"!=typeof r){var i="Object "+s.classString(t)+" has no method '"+s.toString(n)+"'";throw new e.TypeError(i)}return r}function r(t){var e=this.pop(),r=n(t,e);return r.apply(t,this)}function i(t){return t[this]}function o(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var u,s=t("./util"),a=s.canEvaluate;s.isIdentifier;e.prototype.call=function(t){var e=[].slice.call(arguments,1);return e.push(t),this._then(r,void 0,void 0,e,void 0)},e.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=o;else if(a){var r=u(t);e=null!==r?r:i}else e=i;return this._then(e,void 0,void 0,t,void 0)}}},{"./util":36}],6:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util"),u=o.tryCatch,s=o.errorObj,a=e._async;e.prototype.break=e.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t.isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n.isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),e=t,t=n}},e.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},e.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},e.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},e.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},e.prototype._cancel=function(){this.isCancellable()&&(this._setCancelled(),a.invoke(this._cancelPromises,this,void 0))},e.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},e.prototype._unsetOnCancel=function(){this._onCancelField=void 0},e.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},e.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=u(t).call(this._boundValue());r===s&&(this._attachExtraTrace(r.e),a.throwLater(r.e))}}else t._resultCancelled(this)},e.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),a.invoke(this._doInvokeOnCancel,this,t)},e.prototype._invokeInternalOnCancel=function(){this.isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},e.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(t,e,n){"use strict";e.exports=function(e){function n(t,n,s){return function(a){var c=s._boundValue();t:for(var l=0;l<t.length;++l){var f=t[l];if(f===Error||null!=f&&f.prototype instanceof Error){if(a instanceof f)return o(n).call(c,a)}else if("function"==typeof f){var h=o(f).call(c,a);if(h===u)return h;if(h)return o(n).call(c,a)}else if(r.isObject(a)){for(var p=i(f),d=0;d<p.length;++d){var v=p[d];if(f[v]!=a[v])continue t}return o(n).call(c,a)}}return e}}var r=t("./util"),i=t("./es5").keys,o=r.tryCatch,u=r.errorObj;return n}},{"./es5":13,"./util":36}],8:[function(t,e,n){"use strict";e.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){if(i)return new e}function r(){var t=o.length-1;if(t>=0)return o[t]}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,u=t._peekContext,s=t.prototype._peekContext,a=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=u,t.prototype._peekContext=s,t.prototype._promiseCreated=a,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},{}],9:[function(e,n,r){"use strict";n.exports=function(n,r){function i(t,e){return{promise:e}}function o(){return!1}function u(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+B.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function s(t){if(!this.isCancellable())return this;var e=this._onCancel();void 0!==e?B.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function a(){return this._onCancelField}function c(t){this._onCancelField=t}function l(){this._cancellationParent=void 0,this._onCancelField=void 0}function f(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(){var t=this._boundTo;return void 0!==t&&t instanceof n?t.isFulfilled()?t.value():void 0:t}function d(){this._trace=new F(this._peekContext())}function v(t,e){if(U(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=C(t);B.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),B.notEnumerableProp(t,"__stackCleaned__",!0)}}}function y(t,e,n,r,i){if(void 0===t&&null!==e&&Q){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="a promise was created in a "+n+"handler but was not returned from it";r._warn(o,!0,e)}}function _(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),g(n)}function g(t,e,r){if(it.warnings){var i,o=new N(t);if(e)r._attachExtraTrace(o);else if(it.longStackTraces&&(i=n._peekContext()))i.attachExtraTrace(o);else{var u=C(o);o.stack=u.message+"\n"+u.stack.join("\n")}Z("warning",o)||x(o,"",!0)}}function m(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function w(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],u=-1,s=r.length-1;s>=0;--s)if(r[s]===o){u=s;break}for(var s=u;s>=0;--s){var a=r[s];if(e[i]!==a)break;e.pop(),i--}e=r}}function E(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||q.test(r),o=i&&et(r);i&&!o&&(W&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function j(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||q.test(r))break}return n>0&&(e=e.slice(n)),e}function C(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?j(t):["    (No stack trace)"],{message:n,stack:E(e)}}function x(t,e,n){if("undefined"!=typeof console){var r;if(B.isObject(t)){var i=t.stack;r=e+V(i,t)}else r=e+String(t);"function"==typeof I?I(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function S(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){M.throwLater(t)}"unhandledRejection"===t?Z(t,n,r)||i||x(n,"Unhandled rejection "):Z(t,r)}function k(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():B.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+O(e)+">, no stack trace)"}function O(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function A(){return"function"==typeof rt}function T(t){var e=t.match(nt);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function P(t,e){if(A()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),u=-1,s=-1,a=0;a<i.length;++a){var c=T(i[a]);if(c){n=c.fileName,u=c.line;break}}for(var a=0;a<o.length;++a){var c=T(o[a]);if(c){r=c.fileName,s=c.line;break}}u<0||s<0||!n||!r||n!==r||u>=s||(et=function(t){if(H.test(t))return!0;var e=T(t);return!!(e&&e.fileName===n&&u<=e.line&&e.line<=s)})}}function F(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);rt(this,F),e>32&&this.uncycle()}var D,R,I,L=n._getDomain,M=n._async,N=e("./errors").Warning,B=e("./util"),U=B.canAttachTrace,H=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,q=null,V=null,W=!1,z=!(0==B.env("BLUEBIRD_DEBUG")),G=!(0==B.env("BLUEBIRD_WARNINGS")||!z&&!B.env("BLUEBIRD_WARNINGS")),$=!(0==B.env("BLUEBIRD_LONG_STACK_TRACES")||!z&&!B.env("BLUEBIRD_LONG_STACK_TRACES")),Q=0!=B.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(G||!!B.env("BLUEBIRD_W_FORGOTTEN_RETURN"));n.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=t._bitField&-1048577|524288},n.prototype._ensurePossibleRejectionHandled=function(){0===(524288&this._bitField)&&(this._setRejectionIsUnhandled(),M.invokeLater(this._notifyUnhandledRejection,this,void 0))},n.prototype._notifyUnhandledRejectionIsHandled=function(){S("rejectionHandled",D,void 0,this)},n.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},n.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},n.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),S("unhandledRejection",R,t,this)}},n.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},n.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},n.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},n.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},n.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},n.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},n.prototype._warn=function(t,e,n){return g(t,e,n||this)},n.onPossiblyUnhandledRejection=function(t){var e=L();R="function"==typeof t?null===e?t:e.bind(t):void 0},n.onUnhandledRejectionHandled=function(t){var e=L();D="function"==typeof t?null===e?t:e.bind(t):void 0};var K=function(){};n.longStackTraces=function(){if(M.haveItemsQueued()&&!it.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!it.longStackTraces&&A()){var t=n.prototype._captureStackTrace,e=n.prototype._attachExtraTrace;it.longStackTraces=!0,K=function(){if(M.haveItemsQueued()&&!it.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");n.prototype._captureStackTrace=t,n.prototype._attachExtraTrace=e,r.deactivateLongStackTraces(),M.enableTrampoline(),it.longStackTraces=!1},n.prototype._captureStackTrace=d,n.prototype._attachExtraTrace=v,r.activateLongStackTraces(),M.disableTrampolineIfNecessary()}},n.hasLongStackTraces=function(){return it.longStackTraces&&A()};var X=function(){try{var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),B.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!B.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),Y=function(){return B.isNode?function(){return t.emit.apply(t,arguments)}:B.global?function(t){var e="on"+t.toLowerCase(),n=B.global[e];return!!n&&(n.apply(B.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),J={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:i},Z=function(t){var e=!1;try{e=Y.apply(null,arguments)}catch(t){M.throwLater(t),e=!0}var n=!1;try{n=X(t,J[t].apply(null,arguments))}catch(t){M.throwLater(t),n=!0}return n||e};n.config=function(t){if(t=Object(t),"longStackTraces"in t&&(t.longStackTraces?n.longStackTraces():!t.longStackTraces&&n.hasLongStackTraces()&&K()),"warnings"in t){var e=t.warnings;it.warnings=!!e,Q=it.warnings,B.isObject(e)&&"wForgottenReturn"in e&&(Q=!!e.wForgottenReturn)}if("cancellation"in t&&t.cancellation&&!it.cancellation){if(M.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");n.prototype._clearCancellationData=l,n.prototype._propagateFrom=f,n.prototype._onCancel=a,n.prototype._setOnCancel=c,n.prototype._attachCancellationCallback=s,n.prototype._execute=u,
tt=f,it.cancellation=!0}"monitoring"in t&&(t.monitoring&&!it.monitoring?(it.monitoring=!0,n.prototype._fireEvent=Z):!t.monitoring&&it.monitoring&&(it.monitoring=!1,n.prototype._fireEvent=o))},n.prototype._fireEvent=o,n.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},n.prototype._onCancel=function(){},n.prototype._setOnCancel=function(t){},n.prototype._attachCancellationCallback=function(t){},n.prototype._captureStackTrace=function(){},n.prototype._attachExtraTrace=function(){},n.prototype._clearCancellationData=function(){},n.prototype._propagateFrom=function(t,e){};var tt=h,et=function(){return!1},nt=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;B.inherits(F,Error),r.CapturedTrace=F,F.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var u=e[r].stack,s=n[u];if(void 0!==s&&s!==r){s>0&&(e[s-1]._parent=void 0,e[s-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var a=r>0?e[r-1]:this;s<t-1?(a._parent=e[s+1],a._parent.uncycle(),a._length=a._parent._length+1):(a._parent=void 0,a._length=1);for(var c=a._length+1,l=r-2;l>=0;--l)e[l]._length=c,c++;return}}}},F.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=C(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(E(i.stack.split("\n"))),i=i._parent;w(r),b(r),B.notEnumerableProp(t,"stack",m(n,r)),B.notEnumerableProp(t,"__stackCleaned__",!0)}};var rt=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():k(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,q=t,V=e;var n=Error.captureStackTrace;return et=function(t){return H.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return q=/@/,V=e,W=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(t){i="stack"in t}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(V=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?k(e):e.toString()},null):(q=t,V=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(I=function(t){console.warn(t)},B.isNode&&t.stderr.isTTY?I=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:B.isNode||"string"!=typeof(new Error).stack||(I=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var it={warnings:G,longStackTraces:!1,cancellation:!1,monitoring:!1};return $&&n.longStackTraces(),{longStackTraces:function(){return it.longStackTraces},warnings:function(){return it.warnings},cancellation:function(){return it.cancellation},monitoring:function(){return it.monitoring},propagateFromFunction:function(){return tt},boundValueFunction:function(){return p},checkForgottenReturns:y,setBounds:P,warn:g,deprecated:_,CapturedTrace:F,fireDomEvent:X,fireGlobalEvent:Y}}},{"./errors":12,"./util":36}],10:[function(t,e,n){"use strict";e.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},{}],11:[function(t,e,n){"use strict";e.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return this.mapSeries(t)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,e){return r(t,e)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},{}],12:[function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(f(this,"message","string"==typeof r?r:e),f(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return l(n,Error),n}function i(t){return this instanceof i?(f(this,"name","OperationalError"),f(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(f(this,"message",t.message),f(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,u,s=t("./es5"),a=s.freeze,c=t("./util"),l=c.inherits,f=c.notEnumerableProp,h=r("Warning","warning"),p=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,u=RangeError}catch(t){o=r("TypeError","type error"),u=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),_=0;_<y.length;++_)"function"==typeof Array.prototype[y[_]]&&(v.prototype[y[_]]=Array.prototype[y[_]]);s.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var g=0;v.prototype.toString=function(){var t=Array(4*g+1).join(" "),e="\n"+t+"AggregateError of:\n";g++,t=Array(4*g+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return g--,e},l(i,Error);var m=Error.__BluebirdErrorTypes__;m||(m=a({CancellationError:p,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:v}),s.defineProperty(Error,"__BluebirdErrorTypes__",{value:m,writable:!1,enumerable:!1,configurable:!1})),e.exports={Error:Error,TypeError:o,RangeError:u,CancellationError:m.CancellationError,OperationalError:m.OperationalError,TimeoutError:m.TimeoutError,AggregateError:m.AggregateError,Warning:h}},{"./es5":13,"./util":36}],13:[function(t,e,n){var r=function(){"use strict";return void 0===this}();if(r)e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:r,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var i={}.hasOwnProperty,o={}.toString,u={}.constructor.prototype,s=function(t){var e=[];for(var n in t)i.call(t,n)&&e.push(n);return e},a=function(t,e){return{value:t[e]}},c=function(t,e,n){return t[e]=n.value,t},l=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(t){return u}},h=function(t){try{return"[object Array]"===o.call(t)}catch(t){return!1}};e.exports={isArray:h,keys:s,names:s,defineProperty:c,getDescriptor:a,freeze:l,getPrototypeOf:f,isES5:r,propertyIsWritable:function(){return!0}}}},{}],14:[function(t,e,n){"use strict";e.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},{}],15:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function i(t){this.finallyHandler=t}function o(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function u(){return a.call(this,this.promise._target()._settledValue())}function s(t){if(!o(this,t))return f.e=t,f}function a(t){var r=this.promise,a=this.handler;if(!this.called){this.called=!0;var c=this.isFinallyHandler()?a.call(r._boundValue()):a.call(r._boundValue(),t);if(void 0!==c){r._setReturnedNonUndefined();var h=n(c,r);if(h instanceof e){if(null!=this.cancelPromise){if(h.isCancelled()){var p=new l("late cancellation observer");return r._attachExtraTrace(p),f.e=p,f}h.isPending()&&h._attachCancellationCallback(new i(this))}return h._then(u,s,void 0,this,void 0)}}}return r.isRejected()?(o(this),f.e=t,f):(o(this),t)}var c=t("./util"),l=e.CancellationError,f=c.errorObj;return r.prototype.isFinallyHandler=function(){return 0===this.type},i.prototype._resultCancelled=function(){o(this.finallyHandler)},e.prototype._passThrough=function(t,e,n,i){return"function"!=typeof t?this.then():this._then(n,i,void 0,new r(this,e,t),void 0)},e.prototype.lastly=e.prototype.finally=function(t){return this._passThrough(t,0,a,a)},e.prototype.tap=function(t){return this._passThrough(t,1,a)},r}},{"./util":36}],16:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,u){function s(t,n,r){for(var o=0;o<n.length;++o){r._pushContext();var u=p(n[o])(t);if(r._popContext(),u===h){r._pushContext();var s=e.reject(h.e);return r._popContext(),s}var a=i(u,r);if(a instanceof e)return a}return null}function a(t,n,i,o){if(u.cancellation()){var s=new e(r),a=this._finallyPromise=new e(r);this._promise=s.lastly(function(){return a}),s._captureStackTrace(),s._setOnCancel(this)}else{var c=this._promise=new e(r);c._captureStackTrace()}this._stack=o,this._generatorFunction=t,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var c=t("./errors"),l=c.TypeError,f=t("./util"),h=f.errorObj,p=f.tryCatch,d=[];f.inherits(a,o),a.prototype._isResolved=function(){return null===this._promise},a.prototype._cleanup=function(){this._promise=this._generator=null,u.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},a.prototype._promiseCancelled=function(){if(!this._isResolved()){var t,n="undefined"!=typeof this._generator.return;if(n)this._promise._pushContext(),t=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new e.CancellationError("generator .return() sentinel");e.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),t=p(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(t)}},a.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},a.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},a.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof e){var t=this._yieldedPromise;this._yieldedPromise=null,t.cancel()}},a.prototype.promise=function(){return this._promise},a.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},a.prototype._continue=function(t){var n=this._promise;if(t===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(t.e,!1);var r=t.value;if(t.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof e)&&(o=s(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new l("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",r)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var u=o._bitField;0===(50397184&u)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&u)?this._promiseFulfilled(o._value()):0!==(16777216&u)?this._promiseRejected(o._reason()):this._promiseCancelled()},e.coroutine=function(t,e){if("function"!=typeof t)throw new l("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=a,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r((void 0),(void 0),n,i),u=o.promise();return o._generator=e,o._promiseFulfilled(void 0),u}},e.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new l("expecting a function but got "+f.classString(t));d.push(t)},e.spawn=function(t){if(u.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof t)return n("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new a(t,this),i=r.promise();return r._run(e.spawn),i}}},{"./errors":12,"./util":36}],17:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){var o=t("./util");o.canEvaluate,o.tryCatch,o.errorObj;e.join=function(){var t,e=arguments.length-1;if(e>0&&"function"==typeof arguments[e]){t=arguments[e];var r}var i=[].slice.call(arguments);t&&i.pop();var r=new n(i).promise();return void 0!==t?r.spread(t):r}}},{"./util":36}],18:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,u){function s(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:i.bind(e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=n>=1?[]:p,this._init$(void 0,-2)}function a(t,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+l.classString(n));var u=0;if(void 0!==i){if("object"!=typeof i||null===i)return e.reject(new TypeError("options argument must be an object but it is "+l.classString(i)));if("number"!=typeof i.concurrency)return e.reject(new TypeError("'concurrency' must be a number but it is "+l.classString(i.concurrency)));u=i.concurrency}return u="number"==typeof u&&isFinite(u)&&u>=1?u:0,new s(t,n,u,o).promise()}var c=e._getDomain,l=t("./util"),f=l.tryCatch,h=l.errorObj,p=[];l.inherits(s,n),s.prototype._init=function(){},s.prototype._promiseFulfilled=function(t,n){var r=this._values,o=this.length(),s=this._preservedValues,a=this._limit;if(n<0){if(n=n*-1-1,r[n]=t,a>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(a>=1&&this._inFlight>=a)return r[n]=t,this._queue.push(n),!1;null!==s&&(s[n]=t);var c=this._promise,l=this._callback,p=c._boundValue();c._pushContext();var d=f(l).call(p,t,n,o),v=c._popContext();if(u.checkForgottenReturns(d,v,null!==s?"Promise.filter":"Promise.map",c),d===h)return this._reject(d.e),!0;var y=i(d,this._promise);if(y instanceof e){y=y._target();var _=y._bitField;if(0===(50397184&_))return a>=1&&this._inFlight++,r[n]=y,y._proxy(this,(n+1)*-1),!1;if(0===(33554432&_))return 0!==(16777216&_)?(this._reject(y._reason()),!0):(this._cancel(),!0);d=y._value()}r[n]=d}var g=++this._totalResolved;return g>=o&&(null!==s?this._filter(r,s):this._resolve(r),!0)},s.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},s.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},s.prototype.preservedValues=function(){return this._preservedValues},e.prototype.map=function(t,e){return a(this,t,e,null)},e.map=function(t,e,n,r){return a(t,e,n,r)}}},{"./util":36}],19:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){var u=t("./util"),s=u.tryCatch;e.method=function(t){if("function"!=typeof t)throw new e.TypeError("expecting a function but got "+u.classString(t));return function(){var r=new e(n);r._captureStackTrace(),r._pushContext();var i=s(t).apply(this,arguments),u=r._popContext();return o.checkForgottenReturns(i,u,"Promise.method",r),r._resolveFromSyncValue(i),r}},e.attempt=e.try=function(t){if("function"!=typeof t)return i("expecting a function but got "+u.classString(t));var r=new e(n);r._captureStackTrace(),r._pushContext();var a;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],l=arguments[2];a=u.isArray(c)?s(t).apply(l,c):s(t).call(l,c)}else a=s(t)();var f=r._popContext();return o.checkForgottenReturns(a,f,"Promise.try",r),r._resolveFromSyncValue(a),r},e.prototype._resolveFromSyncValue=function(t){t===u.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},{"./util":36}],20:[function(t,e,n){"use strict";function r(t){return t instanceof Error&&l.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new c(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=l.keys(t),i=0;i<n.length;++i){var o=n[i];f.test(o)||(e[o]=t[o])}return e}return u.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(s(n));t._attachExtraTrace(o),t._reject(o)}else if(e){var u=[].slice.call(arguments,1);t._fulfill(u)}else t._fulfill(r);t=null}}}var u=t("./util"),s=u.maybeWrapAsError,a=t("./errors"),c=a.OperationalError,l=t("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=o},{"./errors":12,"./es5":13,"./util":36}],21:[function(t,e,n){"use strict";e.exports=function(e){function n(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=s(e).apply(n._boundValue(),[null].concat(t));i===a&&u.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?s(e).call(r,null):s(e).call(r,null,t);i===a&&u.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=s(e).call(n._boundValue(),t);i===a&&u.throwLater(i.e)}var o=t("./util"),u=e._async,s=o.tryCatch,a=o.errorObj;e.prototype.asCallback=e.prototype.nodeify=function(t,e){if("function"==typeof t){var o=r;void 0!==e&&Object(e).spread&&(o=n),this._then(o,i,void 0,this,t)}return this}}},{"./util":36}],22:[function(e,n,r){"use strict";n.exports=function(){function r(){}function i(t,e){if("function"!=typeof e)throw new m("expecting a function but got "+d.classString(e));if(t.constructor!==o)throw new m("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n")}function o(t){this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,t!==w&&(i(this,t),this._resolveFromExecutor(t)),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function u(t){this.promise._resolveCallback(t)}function s(t){this.promise._rejectCallback(t,!1)}function a(t){var e=new o(w);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,l=function(){return new m("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},f=function(){return new o.PromiseInspection(this._target())},h=function(t){return o.reject(new m(t))},p={},d=e("./util");c=d.isNode?function(){var e=t.domain;return void 0===e&&(e=null),e}:function(){return null},d.notEnumerableProp(o,"_getDomain",c);var v=e("./es5"),y=e("./async"),_=new y;v.defineProperty(o,"_async",{value:_});var g=e("./errors"),m=o.TypeError=g.TypeError;o.RangeError=g.RangeError;var b=o.CancellationError=g.CancellationError;o.TimeoutError=g.TimeoutError,o.OperationalError=g.OperationalError,o.RejectionError=g.OperationalError,o.AggregateError=g.AggregateError;var w=function(){},E={},j={},C=e("./thenables")(o,w),x=e("./promise_array")(o,w,C,h,r),S=e("./context")(o),k=S.create,O=e("./debuggability")(o,S),A=(O.CapturedTrace,e("./finally")(o,C)),T=e("./catch_filter")(j),P=e("./nodeback"),F=d.errorObj,D=d.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var o=arguments[n];if(!d.isObject(o))return h("expecting an object but got "+d.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,T(r,t,this))}return this.then(void 0,t)},o.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},o.prototype.then=function(t,e){if(O.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+d.classString(t);arguments.length>1&&(n+=", "+d.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},o.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},o.prototype.spread=function(t){return"function"!=typeof t?h("expecting a function but got "+d.classString(t)):this.all()._then(t,void 0,void 0,E,void 0)},o.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new x(this).promise()},o.prototype.error=function(t){return this.caught(d.originatesFromRejection,t)},o.getNewLibraryCopy=n.exports,o.is=function(t){return t instanceof o},o.fromNode=o.fromCallback=function(t){var e=new o(w);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=D(t)(P(e,n));return r===F&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},o.all=function(t){return new x(t).promise()},o.cast=function(t){var e=C(t);return e instanceof o||(e=new o(w),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(t){var e=new o(w);return e._captureStackTrace(),e._rejectCallback(t,!0),e},o.setScheduler=function(t){if("function"!=typeof t)throw new m("expecting a function but got "+d.classString(t));return _.setScheduler(t)},o.prototype._then=function(t,e,n,r,i){var u=void 0!==i,s=u?i:new o(w),a=this._target(),l=a._bitField;u||(s._propagateFrom(this,3),s._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&l)?this._boundValue():a===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,s));var f=c();if(0!==(50397184&l)){var h,p,d=a._settlePromiseCtx;0!==(33554432&l)?(p=a._rejectionHandler0,h=t):0!==(16777216&l)?(p=a._fulfillmentHandler0,h=e,a._unsetRejectionIsUnhandled()):(d=a._settlePromiseLateCancellationObserver,p=new b("late cancellation observer"),a._attachExtraTrace(p),h=e),_.invoke(d,a,{handler:null===f?h:"function"==typeof h&&f.bind(h),promise:s,receiver:r,value:p})}else a._addCallbacks(t,e,s,r,f);return s},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},o.prototype._setLength=function(t){this._bitField=this._bitField&-65536|65535&t},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setAsyncGuaranteed=function(){_.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==p)return void 0===e&&this._isBound()?this._boundValue():e},o.prototype._promiseAt=function(t){return this[4*t-4+2]},o.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},o.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=p),this._addCallbacks(e,n,r,i,null)},o.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=p),this._addCallbacks(n,r,i,o,null)},o.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:i.bind(t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:i.bind(e));else{var u=4*o-4;this[u+2]=n,this[u+3]=r,"function"==typeof t&&(this[u+0]=null===i?t:i.bind(t)),"function"==typeof e&&(this[u+1]=null===i?e:i.bind(e))}return this._setLength(o+1),o},o.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},o.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(l(),!1);var n=C(t,this);if(!(n instanceof o))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(l());var i=r._bitField;if(0===(50397184&i)){var u=this._length();u>0&&r._migrateCallback0(this);for(var s=1;s<u;++s)r._migrateCallbackAt(this,s);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&i))this._fulfill(r._value());else if(0!==(16777216&i))this._reject(r._reason());else{var a=new b("late cancellation observer");r._attachExtraTrace(a),this._reject(a)}}},o.prototype._rejectCallback=function(t,e,n){var r=d.ensureErrorObject(t),i=r===t;if(!i&&!n&&O.warnings()){var o="a promise was rejected with a non-error: "+d.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},o.prototype._resolveFromExecutor=function(t){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)},o.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===E?n&&"number"==typeof n.length?o=D(t).apply(this._boundValue(),n):(o=F,o.e=new m("cannot .spread() a non-array: "+d.classString(n))):o=D(t).call(e,n);var u=r._popContext();i=r._bitField,0===(65536&i)&&(o===j?r._reject(n):o===F?r._rejectCallback(o.e,!1):(O.checkForgottenReturns(o,u,"",r,this),r._resolveCallback(o)))}},o.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(t){this._rejectionHandler0=t},o.prototype._settlePromise=function(t,e,n,i){var u=t instanceof o,s=this._bitField,a=0!==(134217728&s);0!==(65536&s)?(u&&t._invokeInternalOnCancel(),n instanceof A&&n.isFinallyHandler()?(n.cancelPromise=t,D(e).call(n,i)===F&&t._reject(F.e)):e===f?t._fulfill(f.call(n)):n instanceof r?n._promiseCancelled(t):u||t instanceof x?t._cancel():n.cancel()):"function"==typeof e?u?(a&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,i,t)):e.call(n,i,t):n instanceof r?n._isResolved()||(0!==(33554432&s)?n._promiseFulfilled(i,t):n._promiseRejected(i,t)):u&&(a&&t._setAsyncGuaranteed(),0!==(33554432&s)?t._fulfill(i):t._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof o?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof o&&n._reject(i)},o.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},o.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},o.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},o.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=l();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():_.settlePromises(this))}},o.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?_.fatalError(t,d.isNode):void((65535&e)>0?_.settlePromises(this):this._ensurePossibleRejectionHandled())},o.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){O.deprecated("Promise.defer","new Promise");var t=new o(w);return{promise:t,resolve:u,reject:s}},d.notEnumerableProp(o,"_makeSelfResolutionError",l),e("./method")(o,w,C,h,O),e("./bind")(o,w,C,O),e("./cancel")(o,x,h,O),e("./direct_resolve")(o),e("./synchronous_inspection")(o),e("./join")(o,x,C,w,O),o.Promise=o,o.version="3.4.0",e("./map.js")(o,x,h,C,w,O),e("./call_get.js")(o),e("./using.js")(o,h,C,k,w,O),e("./timers.js")(o,w,O),e("./generators.js")(o,h,w,C,r,O),e("./nodeify.js")(o),e("./promisify.js")(o,w),e("./props.js")(o,x,C,h),e("./race.js")(o,w,C,h),e("./reduce.js")(o,x,h,C,w,O),e("./settle.js")(o,x,O),e("./some.js")(o,x,h),e("./filter.js")(o,w),e("./each.js")(o,w),e("./any.js")(o),d.toFastProperties(o),d.toFastProperties(o.prototype),a({a:1}),a({b:2}),a({c:3}),a(1),a(function(){}),a(void 0),a(!1),a(new o(w)),O.setBounds(y.firstLineError,d.lastLineError),o}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36}],23:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o){function u(t){switch(t){case-2:return[];case-3:return{}}}function s(t){var r=this._promise=new e(n);t instanceof e&&r._propagateFrom(t,3),r._setOnCancel(this),this._values=t,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var a=t("./util");a.isArray;return a.inherits(s,o),s.prototype.length=function(){return this._length},s.prototype.promise=function(){return this._promise},s.prototype._init=function t(n,o){var s=r(this._values,this._promise);if(s instanceof e){s=s._target();var c=s._bitField;if(this._values=s,0===(50397184&c))return this._promise._setAsyncGuaranteed(),s._then(t,this._reject,void 0,this,o);if(0===(33554432&c))return 0!==(16777216&c)?this._reject(s._reason()):this._cancel();s=s._value()}if(s=a.asArray(s),null===s){var l=i("expecting an array or an iterable object but got "+a.classString(s)).reason();
return void this._promise._rejectCallback(l,!1)}return 0===s.length?void(o===-5?this._resolveEmptyArray():this._resolve(u(o))):void this._iterate(s)},s.prototype._iterate=function(t){var n=this.getActualLength(t.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,u=null,s=0;s<n;++s){var a=r(t[s],i);a instanceof e?(a=a._target(),u=a._bitField):u=null,o?null!==u&&a.suppressUnhandledRejections():null!==u?0===(50397184&u)?(a._proxy(this,s),this._values[s]=a):o=0!==(33554432&u)?this._promiseFulfilled(a._value(),s):0!==(16777216&u)?this._promiseRejected(a._reason(),s):this._promiseCancelled(s):o=this._promiseFulfilled(a,s)}o||i._setAsyncGuaranteed()},s.prototype._isResolved=function(){return null===this._values},s.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},s.prototype._cancel=function(){!this._isResolved()&&this._promise.isCancellable()&&(this._values=null,this._promise._cancel())},s.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},s.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},s.prototype._promiseCancelled=function(){return this._cancel(),!0},s.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},s.prototype._resultCancelled=function(){if(!this._isResolved()){var t=this._values;if(this._cancel(),t instanceof e)t.cancel();else for(var n=0;n<t.length;++n)t[n]instanceof e&&t[n].cancel()}},s.prototype.shouldCopyValues=function(){return!0},s.prototype.getActualLength=function(t){return t},s}},{"./util":36}],24:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t){return!E.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(t){return!1}}function o(t,e,n){var r=p.getDataPropertyOrDefault(t,e+n,b);return!!r&&i(r)}function u(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),u=0;u<t.length;u+=2)if(t[u]===o)throw new g("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function s(t,e,n,r){for(var s=p.inheritedDataKeys(t),a=[],c=0;c<s.length;++c){var l=s[c],f=t[l],h=r===j||j(l,f,t);"function"!=typeof f||i(f)||o(t,l,e)||!r(l,f,t,h)||a.push(l,f)}return u(a,e,n),a}function a(t,r,i,o,u,s){function a(){var i=r;r===h&&(i=this);var o=new e(n);o._captureStackTrace();var u="string"==typeof l&&this!==c?this[l]:t,a=d(o,s);try{u.apply(i,v(arguments,a))}catch(t){o._rejectCallback(y(t),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var c=function(){return this}(),l=t;return"string"==typeof l&&(t=o),p.notEnumerableProp(a,"__isPromisified__",!0),a}function c(t,e,n,r,i){for(var o=new RegExp(C(e)+"$"),u=s(t,e,o,n),a=0,c=u.length;a<c;a+=2){var l=u[a],f=u[a+1],d=l+e;if(r===x)t[d]=x(l,h,l,f,e,i);else{var v=r(f,function(){return x(l,h,l,f,e,i)});p.notEnumerableProp(v,"__isPromisified__",!0),t[d]=v}}return p.toFastProperties(t),t}function l(t,e,n){return x(t,e,void 0,t,null,n)}var f,h={},p=t("./util"),d=t("./nodeback"),v=p.withAppended,y=p.maybeWrapAsError,_=p.canEvaluate,g=t("./errors").TypeError,m="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],E=new RegExp("^(?:"+w.join("|")+")$"),j=function(t){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},C=function(t){return t.replace(/([$])/,"\\$")},x=_?f:a;e.promisify=function(t,e){if("function"!=typeof t)throw new g("expecting a function but got "+p.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?h:e.context,o=!!e.multiArgs,u=l(t,n,o);return p.copyDescriptors(t,u,r),u},e.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new g("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=m);var i=e.filter;"function"!=typeof i&&(i=j);var o=e.promisifier;if("function"!=typeof o&&(o=x),!p.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var u=p.inheritedDataKeys(t),s=0;s<u.length;++s){var a=t[u[s]];"constructor"!==u[s]&&p.isClass(a)&&(c(a.prototype,r,i,o,n),c(a,r,i,o,n))}return c(t,r,i,o,n)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t){var e,n=!1;if(void 0!==s&&t instanceof s)e=f(t),n=!0;else{var r=l.keys(t),i=r.length;e=new Array(2*i);for(var o=0;o<i;++o){var u=r[o];e[o]=t[u],e[o+i]=u}}this.constructor$(e),this._isMap=n,this._init$(void 0,-3)}function u(t){var n,u=r(t);return c(u)?(n=u instanceof e?u._then(e.props,void 0,void 0,void 0,void 0):new o(u).promise(),u instanceof e&&n._propagateFrom(u,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var s,a=t("./util"),c=a.isObject,l=t("./es5");"function"==typeof Map&&(s=Map);var f=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),h=function(t){for(var e=new s,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};a.inherits(o,n),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=h(this._values);else{r={};for(var i=this.length(),o=0,u=this.length();o<u;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},e.prototype.props=function(){return u(this)},e.props=function(t){return u(t)}}},{"./es5":13,"./util":36}],26:[function(t,e,n){"use strict";function r(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function i(t){this._capacity=t,this._length=0,this._front=0}i.prototype._willBeOverCapacity=function(t){return this._capacity<t},i.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},i.prototype._unshiftOne=function(t){var e=this._capacity;this._checkCapacity(this.length()+1);var n=this._front,r=(n-1&e-1^e)-e;this[r]=t,this._front=r,this._length=this.length()+1},i.prototype.unshift=function(t,e,n){this._unshiftOne(n),this._unshiftOne(e),this._unshiftOne(t)},i.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},i.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},i.prototype.length=function(){return this._length},i.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},i.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var n=this._front,i=this._length,o=n+i&e-1;r(this,0,this,e,o)},e.exports=i},{}],27:[function(t,e,n){"use strict";e.exports=function(e,n,r,i){function o(t,o){var a=r(t);if(a instanceof e)return s(a);if(t=u.asArray(t),null===t)return i("expecting an array or an iterable object but got "+u.classString(t));var c=new e(n);void 0!==o&&c._propagateFrom(o,3);for(var l=c._fulfill,f=c._reject,h=0,p=t.length;h<p;++h){var d=t[h];(void 0!==d||h in t)&&e.cast(d)._then(l,f,void 0,c,null)}return c}var u=t("./util"),s=function(t){return t.then(function(e){return o(e,t)})};e.race=function(t){return o(t,void 0)},e.prototype.race=function(){return o(this,void 0)}}},{"./util":36}],28:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,u){function s(t,n,r,i){this.constructor$(t);var u=h();this._fn=null===u?n:u.bind(n),void 0!==r&&(r=e.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,this._eachValues=i===o?[]:void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function a(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function c(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+p.classString(e));var o=new s(t,e,n,i);return o.promise()}function l(t){this.accum=t,this.array._gotAccum(t);var n=i(this.value,this.array._promise);return n instanceof e?(this.array._currentCancellable=n,n._then(f,void 0,void 0,this,void 0)):f.call(this,n)}function f(t){var n=this.array,r=n._promise,i=d(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),t,this.index,this.length):i.call(r._boundValue(),this.accum,t,this.index,this.length),o instanceof e&&(n._currentCancellable=o);var s=r._popContext();return u.checkForgottenReturns(o,s,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var h=e._getDomain,p=t("./util"),d=p.tryCatch;p.inherits(s,n),s.prototype._gotAccum=function(t){void 0!==this._eachValues&&t!==o&&this._eachValues.push(t)},s.prototype._eachComplete=function(t){return this._eachValues.push(t),this._eachValues},s.prototype._init=function(){},s.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},s.prototype.shouldCopyValues=function(){return!1},s.prototype._resolve=function(t){this._promise._resolveCallback(t),this._values=null},s.prototype._resultCancelled=function(t){return t===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof e&&this._currentCancellable.cancel(),this._initialValue instanceof e&&this._initialValue.cancel()))},s.prototype._iterate=function(t){this._values=t;var n,r,i=t.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=e.resolve(t[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:t[r],index:r,length:i,array:this};n=n._then(l,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(a,a,void 0,n,this)},e.prototype.reduce=function(t,e){return c(this,t,e,null)},e.reduce=function(t,e,n,r){return c(t,e,n,r)}}},{"./util":36}],29:[function(e,n,i){"use strict";var o,u=e("./util"),s=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},a=u.getNativePromise();if(u.isNode&&"undefined"==typeof MutationObserver){var c=r.setImmediate,l=t.nextTick;o=u.isRecentNode?function(t){c.call(r,t)}:function(e){l.call(t,e)}}else if("function"==typeof a){var f=a.resolve();o=function(t){f.then(t)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?"undefined"!=typeof setImmediate?function(t){setImmediate(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:s:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();n.exports=o},{"./util":36}],30:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t)}var o=e.PromiseInspection,u=t("./util");u.inherits(i,n),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},e.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},e.prototype.settle=function(){return e.settle(this)}}},{"./util":36}],31:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var u=t("./util"),s=t("./errors").RangeError,a=t("./errors").AggregateError,c=u.isArray,l={};u.inherits(i,n),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof e||null==this._values?this._cancel():(this._addRejected(l),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new a,e=this.length();e<this._values.length;++e)this._values[e]!==l&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new s(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},e.some=function(t,e){return o(t,e)},e.prototype.some=function(t){return o(this,t)},e._SomePromiseArray=i}},{"./errors":12,"./util":36}],32:[function(t,e,n){"use strict";e.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},u=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},s=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=t.prototype._isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype.isCancelled=function(){return this._target()._isCancelled()},t.prototype.isPending=function(){return u.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return s.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},{}],33:[function(t,e,n){"use strict";e.exports=function(e,n){function r(t,r){if(l(t)){if(t instanceof e)return t;var i=o(t);if(i===c){r&&r._pushContext();var a=e.reject(i.e);return r&&r._popContext(),a}if("function"==typeof i){if(u(t)){var a=new e(n);return t._then(a._fulfill,a._reject,void 0,a,null),a}return s(t,i,r)}}return t}function i(t){return t.then}function o(t){try{return i(t)}catch(t){return c.e=t,c}}function u(t){try{return f.call(t,"_promise0")}catch(t){return!1}}function s(t,r,i){function o(t){s&&(s._resolveCallback(t),s=null)}function u(t){s&&(s._rejectCallback(t,f,!0),s=null)}var s=new e(n),l=s;i&&i._pushContext(),s._captureStackTrace(),i&&i._popContext();var f=!0,h=a.tryCatch(r).call(t,o,u);return f=!1,s&&h===c&&(s._rejectCallback(h.e,!0,!0),s=null),l}var a=t("./util"),c=a.errorObj,l=a.isObject,f={}.hasOwnProperty;return r}},{"./util":36}],34:[function(t,e,n){"use strict";e.exports=function(e,n,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function u(t){throw clearTimeout(this.handle),t}var s=t("./util"),a=e.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(t){return l(+this).thenReturn(t)},l=e.delay=function(t,o){var u,s;return void 0!==o?(u=e.resolve(o)._then(c,null,null,t,void 0),r.cancellation()&&o instanceof e&&u._setOnCancel(o)):(u=new e(n),s=setTimeout(function(){u._fulfill()},+t),r.cancellation()&&u._setOnCancel(new i(s))),u._setAsyncGuaranteed(),u};e.prototype.delay=function(t){return l(t,this)};var f=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new a("operation timed out"):new a(e),s.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};e.prototype.timeout=function(t,e){t=+t;var n,s,a=new i(setTimeout(function(){n.isPending()&&f(n,e,s)},t));return r.cancellation()?(s=this.then(),n=s._then(o,u,void 0,a,void 0),n._setOnCancel(a)):n=this._then(o,u,void 0,a,void 0),n}}},{"./util":36}],35:[function(t,e,n){"use strict";e.exports=function(e,n,r,i,o,u){function s(t){setTimeout(function(){throw t},0)}function a(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(t,n){function i(){if(u>=c)return l._fulfill();var o=a(t[u++]);if(o instanceof e&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),t.promise)}catch(t){return s(t)}if(o instanceof e)return o._then(i,s,null,null,null)}i()}var u=0,c=t.length,l=new e(o);return i(),l}function l(t,e,n){this._data=t,this._promise=e,this._context=n}function f(t,e,n){this.constructor$(t,e,n)}function h(t){return l.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function p(t){this.length=t,this.promise=null,this[t-1]=null}var d=t("./util"),v=t("./errors").TypeError,y=t("./util").inherits,_=d.errorObj,g=d.tryCatch,m={};l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():m},l.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==m?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},l.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},y(f,l),f.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},p.prototype._resultCancelled=function(){for(var t=this.length,n=0;n<t;++n){var r=this[n];r instanceof e&&r.cancel()}},e.using=function(){var t=arguments.length;if(t<2)return n("you must pass at least 2 arguments to Promise.using");var i=arguments[t-1];if("function"!=typeof i)return n("expecting a function but got "+d.classString(i));var o,s=!0;2===t&&Array.isArray(arguments[0])?(o=arguments[0],t=o.length,s=!1):(o=arguments,t--);for(var a=new p(t),f=0;f<t;++f){var v=o[f];if(l.isDisposer(v)){var y=v;v=v.promise(),v._setDisposable(y)}else{var m=r(v);m instanceof e&&(v=m._then(h,null,null,{resources:a,index:f},void 0))}a[f]=v}for(var b=new Array(a.length),f=0;f<b.length;++f)b[f]=e.resolve(a[f]).reflect();var w=e.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return _.e=n.error(),_;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}E._pushContext(),i=g(i);var r=s?i.apply(void 0,t):i(t),o=E._popContext();return u.checkForgottenReturns(r,o,"Promise.using",E),r}),E=w.lastly(function(){var t=new e.PromiseInspection(w);return c(a,t)});return a.promise=E,E._setOnCancel(a),E},e.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},e.prototype._isDisposable=function(){return(131072&this._bitField)>0},e.prototype._getDisposer=function(){return this._disposer},e.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},e.prototype.disposer=function(t){if("function"==typeof t)return new f(t,this,i());throw new v}}},{"./errors":12,"./util":36}],36:[function(e,n,i){"use strict";function o(){try{var t=T;return T=null,t.apply(this,arguments)}catch(t){return A.e=t,A}}function u(t){return T=t,o}function s(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function a(t){return"function"==typeof t||"object"==typeof t&&null!==t}function c(t){return s(t)?new Error(g(t)):t}function l(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function f(t,e,n){if(!k.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function h(t,e,n){if(s(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return k.defineProperty(t,e,r),t}function p(t){throw t}function d(t){try{if("function"==typeof t){var e=k.names(t.prototype),n=k.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=R.test(t+"")&&k.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function v(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function y(t){return I.test(t)}function _(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function g(t){try{return t+""}catch(t){return"[no string representation]"}}function m(t){return null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function b(t){try{h(t,"isOperational",!0)}catch(t){}}function w(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0)}function E(t){return m(t)&&k.propertyIsWritable(t,"stack")}function j(t){return{}.toString.call(t)}function C(t,e,n){for(var r=k.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{k.defineProperty(e,o,k.getDescriptor(t,o))}catch(t){}}}function x(e,n){return B?t.env[e]:n}function S(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}var k=e("./es5"),O="undefined"==typeof navigator,A={e:{}},T,P="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof r?r:void 0!==this?this:null,F=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},D=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(k.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(t){return r}for(var u=0;u<o.length;++u){var s=o[u];if(!i[s]){i[s]=!0;var a=Object.getOwnPropertyDescriptor(t,s);null!=a&&null==a.get&&null==a.set&&r.push(s)}}t=k.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var u=0;u<t.length;++u)if(r.call(t[u],o))continue t;i.push(o)}return i}}(),R=/this\s*\.\s*\S+\s*=/,I=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(t){return E(t)?t:new Error(g(t))}:function(t){if(E(t))return t;try{throw new Error(g(t))}catch(t){return t}}}(),M=function(t){return k.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var N="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};M=function(t){return k.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?N(t):null}}var B="undefined"!=typeof t&&"[object process]"===j(t).toLowerCase(),U={isClass:d,isIdentifier:y,inheritedDataKeys:D,getDataPropertyOrDefault:f,thrower:p,isArray:k.isArray,asArray:M,notEnumerableProp:h,isPrimitive:s,isObject:a,isError:m,canEvaluate:O,errorObj:A,tryCatch:u,inherits:F,withAppended:l,maybeWrapAsError:c,toFastProperties:v,filledRange:_,toString:g,canAttachTrace:E,ensureErrorObject:L,originatesFromRejection:w,markAsOriginatingFromRejection:b,classString:j,copyDescriptors:C,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:B,env:x,global:P,getNativePromise:S};U.isRecentNode=U.isNode&&function(){var e=t.versions.node.split(".").map(Number);return 0===e[0]&&e[1]>10||e[0]>0}(),U.isNode&&U.toFastProperties(t);try{throw new Error}catch(t){U.lastLineError=t}n.exports=U},{"./es5":13}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:3}],3:[function(t,e,n){function r(){h&&l&&(h=!1,l.length?f=l.concat(f):p=-1,f.length&&i())}function i(){if(!h){var t=s(r);h=!0;for(var e=f.length;e;){for(l=f,f=[];++p<e;)l&&l[p].run();p=-1,e=f.length}l=null,h=!1,a(t)}}function o(t,e){this.fun=t,this.array=e}function u(){}var s,a,c=e.exports={};!function(){try{s=setTimeout}catch(t){s=function(){throw new Error("setTimeout is not defined")}}try{a=clearTimeout}catch(t){a=function(){throw new Error("clearTimeout is not defined")}}}();var l,f=[],h=!1,p=-1;c.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new o(t,e)),1!==f.length||h||s(i,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=u,c.addListener=u,c.once=u,c.off=u,c.removeListener=u,c.removeAllListeners=u,c.emit=u,c.binding=function(t){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(t){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},{}],4:[function(t,e,n){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,n,o){e=e||"&",n=n||"=";var u={};if("string"!=typeof t||0===t.length)return u;var s=/\+/g;t=t.split(e);var a=1e3;o&&"number"==typeof o.maxKeys&&(a=o.maxKeys);var c=t.length;a>0&&c>a&&(c=a);for(var l=0;l<c;++l){var f,h,p,d,v=t[l].replace(s,"%20"),y=v.indexOf(n);y>=0?(f=v.substr(0,y),h=v.substr(y+1)):(f=v,h=""),p=decodeURIComponent(f),d=decodeURIComponent(h),r(u,p)?i(u[p])?u[p].push(d):u[p]=[u[p],d]:u[p]=d}return u};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],5:[function(t,e,n){"use strict";function r(t,e){if(t.map)return t.map(e);for(var n=[],r=0;r<t.length;r++)n.push(e(t[r],r));return n}var i=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,n,s){return e=e||"&",n=n||"=",null===t&&(t=void 0),"object"==typeof t?r(u(t),function(u){var s=encodeURIComponent(i(u))+n;return o(t[u])?r(t[u],function(t){return s+encodeURIComponent(i(t))}).join(e):s+encodeURIComponent(i(t[u]))}).join(e):s?encodeURIComponent(i(s))+n+encodeURIComponent(i(t)):""};var o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=Object.keys||function(t){var e=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.push(n);return e}},{}],6:[function(t,e,n){"use strict";n.decode=n.parse=t("./decode"),n.encode=n.stringify=t("./encode")},{"./decode":4,"./encode":5}],7:[function(t,e,n){t("whatwg-fetch"),e.exports=self.fetch.bind(self)},{"whatwg-fetch":8}],8:[function(t,e,n){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return v.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function u(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function s(t){var e=new FileReader;return e.readAsArrayBuffer(t),u(e)}function a(t){var e=new FileReader;return e.readAsText(t),u(e)}function c(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(v.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(t){if(!v.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):v.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},v.blob?(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return a(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=o(this);return t?t:Promise.resolve(this._bodyText)},v.formData&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function l(t){var e=t.toUpperCase();return y.indexOf(e)>-1?e:t}function f(t,e){e=e||{};var n=e.body;if(f.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=l(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function h(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");
e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function p(t){var e=new i,n=(t.getAllResponseHeaders()||"").trim().split("\n");return n.forEach(function(t){var n=t.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();e.append(r,i)}),e}function d(t,e){e||(e={}),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof i?e.headers:new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var v={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];i||(i=[],this.map[t]=i),i.push(r)},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){var n=this.map[e(t)];return n?n[0]:null},i.prototype.getAll=function(t){return this.map[e(t)]||[]},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=[n(r)]},i.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){t.call(e,r,n,this)},this)},this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},v.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];f.prototype.clone=function(){return new f(this)},c.call(f.prototype),c.call(d.prototype),d.prototype.clone=function(){return new d(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},d.error=function(){var t=new d(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];d.redirect=function(t,e){if(_.indexOf(e)===-1)throw new RangeError("Invalid status code");return new d(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=f,t.Response=d,t.fetch=function(t,e){return new Promise(function(n,r){function i(){return"responseURL"in u?u.responseURL:/^X-Request-URL:/m.test(u.getAllResponseHeaders())?u.getResponseHeader("X-Request-URL"):void 0}var o;o=f.prototype.isPrototypeOf(t)&&!e?t:new f(t,e);var u=new XMLHttpRequest;u.onload=function(){var t={status:u.status,statusText:u.statusText,headers:p(u),url:i()},e="response"in u?u.response:u.responseText;n(new d(e,t))},u.onerror=function(){r(new TypeError("Network request failed"))},u.ontimeout=function(){r(new TypeError("Network request failed"))},u.open(o.method,o.url,!0),"include"===o.credentials&&(u.withCredentials=!0),"responseType"in u&&v.blob&&(u.responseType="blob"),o.headers.forEach(function(t,e){u.setRequestHeader(e,t)}),u.send("undefined"==typeof o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},{}],9:[function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(r(this,t),!e||"string"!=typeof e)throw new Error("A string non-empty key is required");this._key=e,this._assignEntity=n.assignEntity;var i=n.idAttribute||"id";this._getId="function"==typeof i?i:function(t){return t[i]},this._idAttribute=i,this._meta=n.meta}return i(t,[{key:"getAssignEntity",value:function(){return this._assignEntity}},{key:"getKey",value:function(){return this._key}},{key:"getId",value:function(t){return this._getId(t)}},{key:"getIdAttribute",value:function(){return this._idAttribute}},{key:"getMeta",value:function(t){if(!t||"string"!=typeof t)throw new Error("A string non-empty property name is required");return this._meta&&this._meta[t]}},{key:"define",value:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])}}]),t}();n.default=o},{}],10:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("lodash/isObject"),s=r(u),a=t("./UnionSchema"),c=r(a),l=function(){function t(e){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(i(this,t),!(0,s.default)(e))throw new Error("ArraySchema requires item schema to be an object.");if(n.schemaAttribute){var r=n.schemaAttribute;this._itemSchema=new c.default(e,{schemaAttribute:r})}else this._itemSchema=e}return o(t,[{key:"getItemSchema",value:function(){return this._itemSchema}}]),t}();n.default=l},{"./UnionSchema":11,"lodash/isObject":86}],11:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(n,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t("lodash/isObject"),s=r(u),a=function(){function t(e,n){if(i(this,t),!(0,s.default)(e))throw new Error("UnionSchema requires item schema to be an object.");if(!n||!n.schemaAttribute)throw new Error("UnionSchema requires schemaAttribute option.");this._itemSchema=e;var r=n.schemaAttribute;this._getSchema="function"==typeof r?r:function(t){return t[r]}}return o(t,[{key:"getItemSchema",value:function(){return this._itemSchema}},{key:"getSchemaKey",value:function(t){return this._getSchema(t)}}]),t}();n.default=a},{"lodash/isObject":86}],12:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){t[e]=n}function o(t,e,n,r){var o=r.assignEntity,u=void 0===o?i:o,s={};for(var a in t)if(t.hasOwnProperty(a)){var c=e&&e.getAssignEntity&&e.getAssignEntity(),l=h(t[a],e[a],n,r);u.call(null,s,a,l,t,e),c&&c.call(null,s,a,l,t,e)}return s}function u(t,e,n,r){return function(t){return h(t,e,n,r)}}function s(t,e,n,r){return function(i){var o=t.getSchemaKey(i),u=h(i,e[o],n,r);return{id:u,schema:o}}}function a(t,e,n,r){var i=e.getItemSchema(),o=u(e,i,n,r);return Array.isArray(t)?t.map(o):Object.keys(t).reduce(function(e,n){return e[n]=o(t[n]),e},{})}function c(t,e,n,r){var i=e.getItemSchema();return s(e,i,n,r)(t)}function l(t,e,n){for(var r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&!(0,C.default)(t[r],e[r])?console.warn("When merging two "+n+', found unequal data in their "'+r+'" values. Using the earlier value.',t[r],e[r]):t[r]=e[r])}function f(t,e,n,r){var i=r.mergeIntoEntity,u=void 0===i?l:i,s=e.getKey(),a=e.getId(t);n.hasOwnProperty(s)||(n[s]={}),n[s].hasOwnProperty(a)||(n[s][a]={});var c=n[s][a],f=o(t,e,n,r);return u(c,f,s),a}function h(t,e,n,r){return(0,S.default)(t)&&(0,S.default)(e)?e instanceof g.default?f(t,e,n,r):e instanceof b.default?a(t,e,n,r):e instanceof E.default?c(t,e,n,r):o(t,e,n,r):t}function p(t,e){return new b.default(t,e)}function d(t,e){return new b.default(t,e)}function v(t,e){return new E.default(t,e)}function y(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];if(!(0,S.default)(t))throw new Error("Normalize accepts an object or an array as its input.");if(!(0,S.default)(e)||Array.isArray(e))throw new Error("Normalize accepts an object for schema.");var r={},i=h(t,e,r,n);return{entities:r,result:i}}Object.defineProperty(n,"__esModule",{value:!0}),n.Schema=void 0,n.arrayOf=p,n.valuesOf=d,n.unionOf=v,n.normalize=y;var _=t("./EntitySchema"),g=r(_),m=t("./IterableSchema"),b=r(m),w=t("./UnionSchema"),E=r(w),j=t("lodash/isEqual"),C=r(j),x=t("lodash/isObject"),S=r(x);n.Schema=g.default},{"./EntitySchema":9,"./IterableSchema":10,"./UnionSchema":11,"lodash/isEqual":83,"lodash/isObject":86}],13:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"DataView");e.exports=o},{"./_getNative":41,"./_root":68}],14:[function(t,e,n){function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_hashClear"),o=t("./_hashDelete"),u=t("./_hashGet"),s=t("./_hashHas"),a=t("./_hashSet");r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=u,r.prototype.has=s,r.prototype.set=a,e.exports=r},{"./_hashClear":45,"./_hashDelete":46,"./_hashGet":47,"./_hashHas":48,"./_hashSet":49}],15:[function(t,e,n){function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_listCacheClear"),o=t("./_listCacheDelete"),u=t("./_listCacheGet"),s=t("./_listCacheHas"),a=t("./_listCacheSet");r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=u,r.prototype.has=s,r.prototype.set=a,e.exports=r},{"./_listCacheClear":56,"./_listCacheDelete":57,"./_listCacheGet":58,"./_listCacheHas":59,"./_listCacheSet":60}],16:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"Map");e.exports=o},{"./_getNative":41,"./_root":68}],17:[function(t,e,n){function r(t){var e=-1,n=t?t.length:0;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}var i=t("./_mapCacheClear"),o=t("./_mapCacheDelete"),u=t("./_mapCacheGet"),s=t("./_mapCacheHas"),a=t("./_mapCacheSet");r.prototype.clear=i,r.prototype.delete=o,r.prototype.get=u,r.prototype.has=s,r.prototype.set=a,e.exports=r},{"./_mapCacheClear":61,"./_mapCacheDelete":62,"./_mapCacheGet":63,"./_mapCacheHas":64,"./_mapCacheSet":65}],18:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"Promise");e.exports=o},{"./_getNative":41,"./_root":68}],19:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"Set");e.exports=o},{"./_getNative":41,"./_root":68}],20:[function(t,e,n){function r(t){var e=-1,n=t?t.length:0;for(this.__data__=new i;++e<n;)this.add(t[e])}var i=t("./_MapCache"),o=t("./_setCacheAdd"),u=t("./_setCacheHas");r.prototype.add=r.prototype.push=o,r.prototype.has=u,e.exports=r},{"./_MapCache":17,"./_setCacheAdd":69,"./_setCacheHas":70}],21:[function(t,e,n){function r(t){this.__data__=new i(t)}var i=t("./_ListCache"),o=t("./_stackClear"),u=t("./_stackDelete"),s=t("./_stackGet"),a=t("./_stackHas"),c=t("./_stackSet");r.prototype.clear=o,r.prototype.delete=u,r.prototype.get=s,r.prototype.has=a,r.prototype.set=c,e.exports=r},{"./_ListCache":15,"./_stackClear":72,"./_stackDelete":73,"./_stackGet":74,"./_stackHas":75,"./_stackSet":76}],22:[function(t,e,n){var r=t("./_root"),i=r.Symbol;e.exports=i},{"./_root":68}],23:[function(t,e,n){var r=t("./_root"),i=r.Uint8Array;e.exports=i},{"./_root":68}],24:[function(t,e,n){var r=t("./_getNative"),i=t("./_root"),o=r(i,"WeakMap");e.exports=o},{"./_getNative":41,"./_root":68}],25:[function(t,e,n){function r(t,e){for(var n=-1,r=t?t.length:0;++n<r;)if(e(t[n],n,t))return!0;return!1}e.exports=r},{}],26:[function(t,e,n){function r(t,e){for(var n=t.length;n--;)if(i(t[n][0],e))return n;return-1}var i=t("./eq");e.exports=r},{"./eq":78}],27:[function(t,e,n){function r(t,e){return null!=t&&(u.call(t,e)||"object"==typeof t&&e in t&&null===i(t))}var i=t("./_getPrototype"),o=Object.prototype,u=o.hasOwnProperty;e.exports=r},{"./_getPrototype":42}],28:[function(t,e,n){function r(t,e,n,s,a){return t===e||(null==t||null==e||!o(t)&&!u(e)?t!==t&&e!==e:i(t,e,r,n,s,a))}var i=t("./_baseIsEqualDeep"),o=t("./isObject"),u=t("./isObjectLike");e.exports=r},{"./_baseIsEqualDeep":29,"./isObject":86,"./isObjectLike":87}],29:[function(t,e,n){function r(t,e,n,r,y,g){var m=c(t),b=c(e),w=d,E=d;m||(w=a(t),w=w==p?v:w),b||(E=a(e),E=E==p?v:E);var j=w==v&&!l(t),C=E==v&&!l(e),x=w==E;if(x&&!j)return g||(g=new i),m||f(t)?o(t,e,n,r,y,g):u(t,e,w,n,r,y,g);if(!(y&h)){var S=j&&_.call(t,"__wrapped__"),k=C&&_.call(e,"__wrapped__");if(S||k){var O=S?t.value():t,A=k?e.value():e;return g||(g=new i),n(O,A,r,y,g)}}return!!x&&(g||(g=new i),s(t,e,n,r,y,g))}var i=t("./_Stack"),o=t("./_equalArrays"),u=t("./_equalByTag"),s=t("./_equalObjects"),a=t("./_getTag"),c=t("./isArray"),l=t("./_isHostObject"),f=t("./isTypedArray"),h=2,p="[object Arguments]",d="[object Array]",v="[object Object]",y=Object.prototype,_=y.hasOwnProperty;e.exports=r},{"./_Stack":21,"./_equalArrays":36,"./_equalByTag":37,"./_equalObjects":38,"./_getTag":43,"./_isHostObject":51,"./isArray":80,"./isTypedArray":89}],30:[function(t,e,n){function r(t){if(!s(t)||u(t))return!1;var e=i(t)||o(t)?d:l;return e.test(a(t))}var i=t("./isFunction"),o=t("./_isHostObject"),u=t("./_isMasked"),s=t("./isObject"),a=t("./_toSource"),c=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,f=Object.prototype,h=Function.prototype.toString,p=f.hasOwnProperty,d=RegExp("^"+h.call(p).replace(c,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=r},{"./_isHostObject":51,"./_isMasked":54,"./_toSource":77,"./isFunction":84,"./isObject":86}],31:[function(t,e,n){function r(t){return i(Object(t))}var i=Object.keys;e.exports=r},{}],32:[function(t,e,n){function r(t){return function(e){return null==e?void 0:e[t]}}e.exports=r},{}],33:[function(t,e,n){function r(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}e.exports=r},{}],34:[function(t,e,n){function r(t){return t&&t.Object===Object?t:null}e.exports=r},{}],35:[function(t,e,n){var r=t("./_root"),i=r["__core-js_shared__"];e.exports=i},{"./_root":68}],36:[function(t,e,n){function r(t,e,n,r,a,c){var l=a&s,f=t.length,h=e.length;if(f!=h&&!(l&&h>f))return!1;var p=c.get(t);if(p)return p==e;var d=-1,v=!0,y=a&u?new i:void 0;for(c.set(t,e);++d<f;){var _=t[d],g=e[d];if(r)var m=l?r(g,_,d,e,t,c):r(_,g,d,t,e,c);if(void 0!==m){if(m)continue;v=!1;break}if(y){if(!o(e,function(t,e){if(!y.has(e)&&(_===t||n(_,t,r,a,c)))return y.add(e)})){v=!1;break}}else if(_!==g&&!n(_,g,r,a,c)){v=!1;break}}return c.delete(t),v}var i=t("./_SetCache"),o=t("./_arraySome"),u=1,s=2;e.exports=r},{"./_SetCache":20,"./_arraySome":25}],37:[function(t,e,n){function r(t,e,n,r,i,E,C){switch(n){case w:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case b:return!(t.byteLength!=e.byteLength||!r(new o(t),new o(e)));case f:case h:return+t==+e;case p:return t.name==e.name&&t.message==e.message;case v:return t!=+t?e!=+e:t==+e;case y:case g:return t==e+"";case d:var x=s;case _:var S=E&l;if(x||(x=a),t.size!=e.size&&!S)return!1;var k=C.get(t);return k?k==e:(E|=c,C.set(t,e),u(x(t),x(e),r,i,E,C));case m:if(j)return j.call(t)==j.call(e)}return!1}var i=t("./_Symbol"),o=t("./_Uint8Array"),u=t("./_equalArrays"),s=t("./_mapToArray"),a=t("./_setToArray"),c=1,l=2,f="[object Boolean]",h="[object Date]",p="[object Error]",d="[object Map]",v="[object Number]",y="[object RegExp]",_="[object Set]",g="[object String]",m="[object Symbol]",b="[object ArrayBuffer]",w="[object DataView]",E=i?i.prototype:void 0,j=E?E.valueOf:void 0;e.exports=r},{"./_Symbol":22,"./_Uint8Array":23,"./_equalArrays":36,"./_mapToArray":66,"./_setToArray":71}],38:[function(t,e,n){function r(t,e,n,r,s,a){var c=s&u,l=o(t),f=l.length,h=o(e),p=h.length;if(f!=p&&!c)return!1;for(var d=f;d--;){var v=l[d];if(!(c?v in e:i(e,v)))return!1}var y=a.get(t);if(y)return y==e;var _=!0;a.set(t,e);for(var g=c;++d<f;){v=l[d];var m=t[v],b=e[v];if(r)var w=c?r(b,m,v,e,t,a):r(m,b,v,t,e,a);if(!(void 0===w?m===b||n(m,b,r,s,a):w)){_=!1;break}g||(g="constructor"==v)}if(_&&!g){var E=t.constructor,j=e.constructor;E!=j&&"constructor"in t&&"constructor"in e&&!("function"==typeof E&&E instanceof E&&"function"==typeof j&&j instanceof j)&&(_=!1)}return a.delete(t),_}var i=t("./_baseHas"),o=t("./keys"),u=2;e.exports=r},{"./_baseHas":27,"./keys":90}],39:[function(t,e,n){var r=t("./_baseProperty"),i=r("length");e.exports=i},{"./_baseProperty":32}],40:[function(t,e,n){function r(t,e){var n=t.__data__;return i(e)?n["string"==typeof e?"string":"hash"]:n.map}var i=t("./_isKeyable");e.exports=r},{"./_isKeyable":53}],41:[function(t,e,n){function r(t,e){var n=o(t,e);return i(n)?n:void 0}var i=t("./_baseIsNative"),o=t("./_getValue");e.exports=r},{"./_baseIsNative":30,"./_getValue":44}],42:[function(t,e,n){function r(t){return i(Object(t))}var i=Object.getPrototypeOf;e.exports=r},{}],43:[function(t,e,n){function r(t){return _.call(t)}var i=t("./_DataView"),o=t("./_Map"),u=t("./_Promise"),s=t("./_Set"),a=t("./_WeakMap"),c=t("./_toSource"),l="[object Map]",f="[object Object]",h="[object Promise]",p="[object Set]",d="[object WeakMap]",v="[object DataView]",y=Object.prototype,_=y.toString,g=c(i),m=c(o),b=c(u),w=c(s),E=c(a);(i&&r(new i(new ArrayBuffer(1)))!=v||o&&r(new o)!=l||u&&r(u.resolve())!=h||s&&r(new s)!=p||a&&r(new a)!=d)&&(r=function(t){var e=_.call(t),n=e==f?t.constructor:void 0,r=n?c(n):void 0;if(r)switch(r){case g:return v;case m:return l;case b:return h;case w:return p;case E:return d}return e}),e.exports=r},{"./_DataView":13,"./_Map":16,"./_Promise":18,"./_Set":19,"./_WeakMap":24,"./_toSource":77}],44:[function(t,e,n){function r(t,e){return null==t?void 0:t[e]}e.exports=r},{}],45:[function(t,e,n){function r(){this.__data__=i?i(null):{}}var i=t("./_nativeCreate");e.exports=r},{"./_nativeCreate":67}],46:[function(t,e,n){function r(t){return this.has(t)&&delete this.__data__[t]}e.exports=r},{}],47:[function(t,e,n){function r(t){var e=this.__data__;if(i){var n=e[t];return n===o?void 0:n}return s.call(e,t)?e[t]:void 0}var i=t("./_nativeCreate"),o="__lodash_hash_undefined__",u=Object.prototype,s=u.hasOwnProperty;e.exports=r},{"./_nativeCreate":67}],48:[function(t,e,n){function r(t){var e=this.__data__;return i?void 0!==e[t]:u.call(e,t)}var i=t("./_nativeCreate"),o=Object.prototype,u=o.hasOwnProperty;e.exports=r},{"./_nativeCreate":67}],49:[function(t,e,n){function r(t,e){var n=this.__data__;return n[t]=i&&void 0===e?o:e,this}var i=t("./_nativeCreate"),o="__lodash_hash_undefined__";e.exports=r},{"./_nativeCreate":67}],50:[function(t,e,n){function r(t){var e=t?t.length:void 0;return s(e)&&(u(t)||a(t)||o(t))?i(e,String):null}var i=t("./_baseTimes"),o=t("./isArguments"),u=t("./isArray"),s=t("./isLength"),a=t("./isString");e.exports=r},{"./_baseTimes":33,"./isArguments":79,"./isArray":80,"./isLength":85,"./isString":88}],51:[function(t,e,n){function r(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}e.exports=r},{}],52:[function(t,e,n){function r(t,e){return e=null==e?i:e,!!e&&("number"==typeof t||o.test(t))&&t>-1&&t%1==0&&t<e}var i=9007199254740991,o=/^(?:0|[1-9]\d*)$/;e.exports=r},{}],53:[function(t,e,n){function r(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}e.exports=r},{}],54:[function(t,e,n){function r(t){return!!o&&o in t}var i=t("./_coreJsData"),o=function(){var t=/[^.]+$/.exec(i&&i.keys&&i.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();e.exports=r},{"./_coreJsData":35}],55:[function(t,e,n){function r(t){var e=t&&t.constructor,n="function"==typeof e&&e.prototype||i;return t===n}var i=Object.prototype;e.exports=r},{}],56:[function(t,e,n){function r(){this.__data__=[]}e.exports=r},{}],57:[function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);if(n<0)return!1;var r=e.length-1;return n==r?e.pop():u.call(e,n,1),!0}var i=t("./_assocIndexOf"),o=Array.prototype,u=o.splice;e.exports=r},{"./_assocIndexOf":26}],58:[function(t,e,n){function r(t){var e=this.__data__,n=i(e,t);return n<0?void 0:e[n][1]}var i=t("./_assocIndexOf");e.exports=r},{"./_assocIndexOf":26}],59:[function(t,e,n){function r(t){return i(this.__data__,t)>-1}var i=t("./_assocIndexOf");e.exports=r},{"./_assocIndexOf":26}],60:[function(t,e,n){function r(t,e){var n=this.__data__,r=i(n,t);return r<0?n.push([t,e]):n[r][1]=e,this}var i=t("./_assocIndexOf");e.exports=r},{"./_assocIndexOf":26}],61:[function(t,e,n){function r(){this.__data__={hash:new i,map:new(u||o),string:new i}}var i=t("./_Hash"),o=t("./_ListCache"),u=t("./_Map");e.exports=r},{"./_Hash":14,"./_ListCache":15,"./_Map":16}],62:[function(t,e,n){function r(t){return i(this,t).delete(t)}var i=t("./_getMapData");e.exports=r},{"./_getMapData":40}],63:[function(t,e,n){function r(t){return i(this,t).get(t)}var i=t("./_getMapData");e.exports=r},{"./_getMapData":40}],64:[function(t,e,n){function r(t){return i(this,t).has(t)}var i=t("./_getMapData");e.exports=r},{"./_getMapData":40}],65:[function(t,e,n){function r(t,e){return i(this,t).set(t,e),this}var i=t("./_getMapData");e.exports=r},{"./_getMapData":40}],66:[function(t,e,n){function r(t){var e=-1,n=Array(t.size);return t.forEach(function(t,r){n[++e]=[r,t]}),n}e.exports=r},{}],67:[function(t,e,n){var r=t("./_getNative"),i=r(Object,"create");e.exports=i},{"./_getNative":41}],68:[function(t,e,n){(function(n){var r=t("./_checkGlobal"),i=r("object"==typeof n&&n),o=r("object"==typeof self&&self),u=r("object"==typeof this&&this),s=i||o||u||Function("return this")();e.exports=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./_checkGlobal":34}],69:[function(t,e,n){function r(t){return this.__data__.set(t,i),this}var i="__lodash_hash_undefined__";e.exports=r},{}],70:[function(t,e,n){function r(t){return this.__data__.has(t)}e.exports=r},{}],71:[function(t,e,n){function r(t){var e=-1,n=Array(t.size);return t.forEach(function(t){n[++e]=t}),n}e.exports=r},{}],72:[function(t,e,n){function r(){this.__data__=new i}var i=t("./_ListCache");e.exports=r},{"./_ListCache":15}],73:[function(t,e,n){function r(t){return this.__data__.delete(t)}e.exports=r},{}],74:[function(t,e,n){function r(t){return this.__data__.get(t)}e.exports=r},{}],75:[function(t,e,n){function r(t){return this.__data__.has(t)}e.exports=r},{}],76:[function(t,e,n){function r(t,e){var n=this.__data__;return n instanceof i&&n.__data__.length==u&&(n=this.__data__=new o(n.__data__)),n.set(t,e),this}var i=t("./_ListCache"),o=t("./_MapCache"),u=200;e.exports=r},{"./_ListCache":15,"./_MapCache":17}],77:[function(t,e,n){function r(t){if(null!=t){try{return i.call(t)}catch(t){}try{return t+""}catch(t){}}return""}var i=Function.prototype.toString;e.exports=r},{}],78:[function(t,e,n){function r(t,e){return t===e||t!==t&&e!==e}e.exports=r},{}],79:[function(t,e,n){function r(t){return i(t)&&s.call(t,"callee")&&(!c.call(t,"callee")||a.call(t)==o)}var i=t("./isArrayLikeObject"),o="[object Arguments]",u=Object.prototype,s=u.hasOwnProperty,a=u.toString,c=u.propertyIsEnumerable;e.exports=r},{"./isArrayLikeObject":82}],80:[function(t,e,n){var r=Array.isArray;e.exports=r},{}],81:[function(t,e,n){function r(t){return null!=t&&u(i(t))&&!o(t)}var i=t("./_getLength"),o=t("./isFunction"),u=t("./isLength");e.exports=r},{"./_getLength":39,"./isFunction":84,"./isLength":85}],82:[function(t,e,n){function r(t){return o(t)&&i(t)}var i=t("./isArrayLike"),o=t("./isObjectLike");e.exports=r},{"./isArrayLike":81,"./isObjectLike":87}],83:[function(t,e,n){function r(t,e){return i(t,e)}var i=t("./_baseIsEqual");e.exports=r},{"./_baseIsEqual":28}],84:[function(t,e,n){function r(t){var e=i(t)?a.call(t):"";return e==o||e==u}var i=t("./isObject"),o="[object Function]",u="[object GeneratorFunction]",s=Object.prototype,a=s.toString;e.exports=r},{"./isObject":86}],85:[function(t,e,n){function r(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}var i=9007199254740991;e.exports=r},{}],86:[function(t,e,n){function r(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}e.exports=r},{}],87:[function(t,e,n){function r(t){return!!t&&"object"==typeof t}e.exports=r},{}],88:[function(t,e,n){function r(t){return"string"==typeof t||!i(t)&&o(t)&&a.call(t)==u}var i=t("./isArray"),o=t("./isObjectLike"),u="[object String]",s=Object.prototype,a=s.toString;e.exports=r},{"./isArray":80,"./isObjectLike":87}],89:[function(t,e,n){function r(t){return o(t)&&i(t.length)&&!!T[F.call(t)]}var i=t("./isLength"),o=t("./isObjectLike"),u="[object Arguments]",s="[object Array]",a="[object Boolean]",c="[object Date]",l="[object Error]",f="[object Function]",h="[object Map]",p="[object Number]",d="[object Object]",v="[object RegExp]",y="[object Set]",_="[object String]",g="[object WeakMap]",m="[object ArrayBuffer]",b="[object DataView]",w="[object Float32Array]",E="[object Float64Array]",j="[object Int8Array]",C="[object Int16Array]",x="[object Int32Array]",S="[object Uint8Array]",k="[object Uint8ClampedArray]",O="[object Uint16Array]",A="[object Uint32Array]",T={};T[w]=T[E]=T[j]=T[C]=T[x]=T[S]=T[k]=T[O]=T[A]=!0,T[u]=T[s]=T[m]=T[a]=T[b]=T[c]=T[l]=T[f]=T[h]=T[p]=T[d]=T[v]=T[y]=T[_]=T[g]=!1;var P=Object.prototype,F=P.toString;e.exports=r},{"./isLength":85,"./isObjectLike":87}],90:[function(t,e,n){function r(t){var e=c(t);if(!e&&!s(t))return o(t);var n=u(t),r=!!n,l=n||[],f=l.length;for(var h in t)!i(t,h)||r&&("length"==h||a(h,f))||e&&"constructor"==h||l.push(h);return l}var i=t("./_baseHas"),o=t("./_baseKeys"),u=t("./_indexKeys"),s=t("./isArrayLike"),a=t("./_isIndex"),c=t("./_isPrototype");e.exports=r},{"./_baseHas":27,"./_baseKeys":31,"./_indexKeys":50,"./_isIndex":52,"./_isPrototype":55,"./isArrayLike":81}],91:[function(t,e,n){(function(){"use strict";var t={"@@functional/placeholder":!0},r=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,i){return e.apply(this,arguments)};case 5:return function(t,n,r,i,o){return e.apply(this,arguments)};case 6:return function(t,n,r,i,o,u){return e.apply(this,arguments)};case 7:return function(t,n,r,i,o,u,s){return e.apply(this,arguments)};case 8:return function(t,n,r,i,o,u,s,a){return e.apply(this,arguments)};case 9:return function(t,n,r,i,o,u,s,a,c){return e.apply(this,arguments)};case 10:return function(t,n,r,i,o,u,s,a,c,l){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}},i=function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n},o=function(){return Array.prototype.slice.call(arguments)},u=function(t){return new RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))},s=function(t){return function(){return!t.apply(this,arguments)}},a=function(t,e){t=t||[],e=e||[];var n,r=t.length,i=e.length,o=[];for(n=0;n<r;)o[o.length]=t[n],n+=1;for(n=0;n<i;)o[o.length]=e[n],n+=1;return o},c=function(t,e,n){for(var r=0,i=n.length;r<i;){if(t(e,n[r]))return!0;r+=1}return!1},l=function(t,e){for(var n=0,r=e.length,i=[];n<r;)t(e[n])&&(i[i.length]=e[n]),n+=1;return i},f=function(t){return{"@@transducer/value":t,"@@transducer/reduced":!0}},h=function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]},p=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)},d=function(t){return t},v=function(){var t=Object.prototype.toString;return"[object Arguments]"===t.call(arguments)?function(e){return"[object Arguments]"===t.call(e)}:function(t){return p("callee",t)}}(),y=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)},_=function(t){return"[object Function]"===Object.prototype.toString.call(t)},g=Number.isInteger||function(t){return t<<0===t},m=function(t){return"[object Number]"===Object.prototype.toString.call(t)},b=function(t){return"[object Object]"===Object.prototype.toString.call(t)},w=function(t){return null!=t&&"object"==typeof t&&t["@@functional/placeholder"]===!0},E=function(t){return"[object RegExp]"===Object.prototype.toString.call(t)},j=function(t){return"[object String]"===Object.prototype.toString.call(t)},C=function(t){return"function"==typeof t["@@transducer/step"]},x=function(t,e){for(var n=0,r=e.length,i=Array(r);n<r;)i[n]=t(e[n]),n+=1;return i},S=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,r=arguments.length;n<r;){var i=arguments[n];if(null!=i)for(var o in i)p(o,i)&&(e[o]=i[o]);n+=1}return e},k=function(t){return[t]},O=function(t,e){return function(){return e.call(this,t.apply(this,arguments))}},A=function(t,e){return function(){var n=this;return t.apply(n,arguments).then(function(t){return e.call(n,t)})}},T=function(t){var e=t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0");return'"'+e.replace(/"/g,'\\"')+'"'},P=function(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}},F=function t(e,n,r){switch(arguments.length){case 1:return t(e,0,e.length);case 2:return t(e,n,e.length);default:for(var i=[],o=0,u=Math.max(0,Math.min(e.length,r)-n);o<u;)i[o]=e[n+o],o+=1;return i}},D=function(){var t=function(t){return(t<10?"0":"")+t};return"function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(e){return e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1)+"-"+t(e.getUTCDate())+"T"+t(e.getUTCHours())+":"+t(e.getUTCMinutes())+":"+t(e.getUTCSeconds())+"."+(e.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}}(),R={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}},I=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},function(e){return new t(e)}}(),L=function(t,e){for(var n=0,r=e.length-(t-1),i=new Array(r>=0?r:0);n<r;)i[n]=F(e,n,n+t),n+=1;return i},M="function"==typeof Object.assign?Object.assign:S,N=function(t,e){return function(){var n=arguments.length;if(0===n)return e();var r=arguments[n-1];return y(r)||"function"!=typeof r[t]?e.apply(this,arguments):r[t].apply(r,F(arguments,0,n-1))}},B=function(t){return function e(n){return 0===arguments.length||w(n)?e:t.apply(this,arguments)}},U=function(t){return function e(n,r){switch(arguments.length){case 0:return e;case 1:return w(n)?e:B(function(e){return t(n,e)});default:return w(n)&&w(r)?e:w(n)?B(function(e){return t(e,r)}):w(r)?B(function(e){return t(n,e)}):t(n,r)}}},H=function(t){return function e(n,r,i){switch(arguments.length){case 0:return e;case 1:return w(n)?e:U(function(e,r){return t(n,e,r)});case 2:return w(n)&&w(r)?e:w(n)?U(function(e,n){return t(e,r,n)}):w(r)?U(function(e,r){return t(n,e,r)}):B(function(e){return t(n,r,e)});default:return w(n)&&w(r)&&w(i)?e:w(n)&&w(r)?U(function(e,n){return t(e,n,i)}):w(n)&&w(i)?U(function(e,n){return t(e,r,n)}):w(r)&&w(i)?U(function(e,r){return t(n,e,r)}):w(n)?B(function(e){return t(e,r,i)}):w(r)?B(function(e){return t(n,e,i)}):w(i)?B(function(e){return t(n,r,e)}):t(n,r,i)}}},q=function t(e,n,i){return function(){for(var o=[],u=0,s=e,a=0;a<n.length||u<arguments.length;){var c;a<n.length&&(!w(n[a])||u>=arguments.length)?c=n[a]:(c=arguments[u],u+=1),o[a]=c,w(c)||(s-=1),a+=1}return s<=0?i.apply(this,o):r(s,t(e,o,i))}},V=function(t,e,n){return function(){var r=arguments.length;if(0===r)return n();var i=arguments[r-1];if(!y(i)){var o=F(arguments,0,r-1);if("function"==typeof i[t])return i[t].apply(i,o);if(C(i)){var u=e.apply(null,o);return u(i)}}return n.apply(this,arguments)}},W=function(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return F(e,0,n+1)},z=function(){function t(t,e){this.xf=e,this.f=t,this.all=!0}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=function(t){
return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)||(this.all=!1,t=P(this.xf["@@transducer/step"](t,!1))),t},U(function(e,n){return new t(e,n)})}(),G=function(){function t(t,e){this.xf=e,this.f=t,this.any=!1}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.any=!0,t=P(this.xf["@@transducer/step"](t,!0))),t},U(function(e,n){return new t(e,n)})}(),$=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.store(e),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},t.prototype.getCopy=function(){return a(F(this.acc,this.pos),F(this.acc,0,this.pos))},U(function(e,n){return new t(e,n)})}(),Q=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=R.result,t.prototype["@@transducer/step"]=function(t,e){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,e)},U(function(e,n){return new t(e,n)})}(),K=function(){function t(t,e){this.xf=e,this.pos=0,this.full=!1,this.acc=new Array(t)}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(e),t},t.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},U(function(e,n){return new t(e,n)})}(),X=function(){function t(t,e){this.xf=e,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}return t.prototype["@@transducer/init"]=function(){return this.xf["@@transducer/init"]()},t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=!1;return this.seenFirstValue?this.pred(this.lastValue,e)&&(n=!0):this.seenFirstValue=!0,this.lastValue=e,n?t:this.xf["@@transducer/step"](t,e)},U(function(e,n){return new t(e,n)})}(),Y=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=R.result,t.prototype["@@transducer/step"]=function(t,e){if(this.f){if(this.f(e))return t;this.f=null}return this.xf["@@transducer/step"](t,e)},U(function(e,n){return new t(e,n)})}(),J=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=R.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},U(function(e,n){return new t(e,n)})}(),Z=function(){function t(t,e){this.xf=e,this.f=t,this.found=!1}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.found=!0,t=P(this.xf["@@transducer/step"](t,e))),t},U(function(e,n){return new t(e,n)})}(),tt=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.found=!1}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.found=!0,t=P(this.xf["@@transducer/step"](t,this.idx))),t},U(function(e,n){return new t(e,n)})}(),et=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)&&(this.last=e),t},U(function(e,n){return new t(e,n)})}(),nt=function(){function t(t,e){this.xf=e,this.f=t,this.idx=-1,this.lastIdx=-1}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},t.prototype["@@transducer/step"]=function(t,e){return this.idx+=1,this.f(e)&&(this.lastIdx=this.idx),t},U(function(e,n){return new t(e,n)})}(),rt=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=R.result,t.prototype["@@transducer/step"]=function(t,e){return this.xf["@@transducer/step"](t,this.f(e))},U(function(e,n){return new t(e,n)})}(),it=function(){function t(t,e){this.xf=e,this.n=t}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=R.result,t.prototype["@@transducer/step"]=function(t,e){return 0===this.n?P(t):(this.n-=1,this.xf["@@transducer/step"](t,e))},U(function(e,n){return new t(e,n)})}(),ot=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=R.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):P(t)},U(function(e,n){return new t(e,n)})}(),ut=U(function(t,e){return Number(t)+Number(e)}),st=H(function(t,e,n){if(e>=n.length||e<-n.length)return n;var r=e<0?n.length:0,i=r+e,o=a(n);return o[i]=t(n[i]),o}),at=U(V("all",z,function(t,e){for(var n=0;n<e.length;){if(!t(e[n]))return!1;n+=1}return!0})),ct=B(function(t){return function(){return t}}),lt=U(function(t,e){return t&&e}),ft=U(V("any",G,function(t,e){for(var n=0;n<e.length;){if(t(e[n]))return!0;n+=1}return!1})),ht=U(V("aperture",$,L)),pt=U(function(t,e){return a(e,[t])}),dt=U(function(t,e){return t.apply(this,e)}),vt=H(function(t,e,n){var r={};for(var i in n)r[i]=n[i];return r[t]=e,r}),yt=H(function t(e,n,r){switch(e.length){case 0:return n;case 1:return vt(e[0],n,r);default:return vt(e[0],t(F(e,1),n,Object(r[e[0]])),r)}}),_t=U(function(t,e){return r(t.length,function(){return t.apply(e,arguments)})}),gt=H(function(t,e,n){if(t>e)throw new Error("min must not be greater than max in clamp(min, max, value)");return n<t?t:n>e?e:n}),mt=B(function(t){return function(e,n){return t(e,n)?-1:t(n,e)?1:0}}),bt=U(function(t,e){return 1===t?B(e):r(t,q(t,[],e))}),wt=ut(-1),Et=U(function(t,e){return null==e||e!==e?t:e}),jt=H(function(t,e,n){for(var r=[],i=0,o=e.length;i<o;)c(t,e[i],n)||c(t,e[i],r)||r.push(e[i]),i+=1;return r}),Ct=U(function(t,e){var n={};for(var r in e)r!==t&&(n[r]=e[r]);return n}),xt=U(function t(e,n){switch(e.length){case 0:return n;case 1:return Ct(e[0],n);default:var r=e[0],i=F(e,1);return null==n[r]?n:vt(r,t(i,n[r]),n)}}),St=U(function(t,e){return t/e}),kt=U(V("dropWhile",Y,function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return F(e,n)})),Ot=B(function(t){return null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():y(t)?[]:j(t)?"":b(t)?{}:v(t)?function(){return arguments}():void 0}),At=U(function t(e,n){var r,i,o,u={};for(i in n)r=e[i],o=typeof r,u[i]="function"===o?r(n[i]):"object"===o?t(e[i],n[i]):n[i];return u}),Tt=U(V("find",Z,function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return e[n];n+=1}})),Pt=U(V("findIndex",tt,function(t,e){for(var n=0,r=e.length;n<r;){if(t(e[n]))return n;n+=1}return-1})),Ft=U(V("findLast",et,function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return e[n];n-=1}})),Dt=U(V("findLastIndex",nt,function(t,e){for(var n=e.length-1;n>=0;){if(t(e[n]))return n;n-=1}return-1})),Rt=U(N("forEach",function(t,e){for(var n=e.length,r=0;r<n;)t(e[r]),r+=1;return e})),It=B(function(t){for(var e=0,n=t.length,r={};e<n;)y(t[e])&&t[e].length&&(r[t[e][0]]=t[e][1]),e+=1;return r}),Lt=U(function(t,e){for(var n=[],r=0,i=e.length;r<i;){for(var o=r+1;o<i&&t(e[r],e[o]);)o+=1;n.push(e.slice(r,o)),r=o}return n}),Mt=U(function(t,e){return t>e}),Nt=U(function(t,e){return t>=e}),Bt=U(p),Ut=U(function(t,e){return t in e}),Ht=U(function(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}),qt=B(d),Vt=H(function(t,e,n){return bt(Math.max(t.length,e.length,n.length),function(){return t.apply(this,arguments)?e.apply(this,arguments):n.apply(this,arguments)})}),Wt=ut(1),zt=H(function(t,e,n){t=t<n.length&&t>=0?t:n.length;var r=F(n);return r.splice(t,0,e),r}),Gt=H(function(t,e,n){return t=t<n.length&&t>=0?t:n.length,a(a(F(n,0,t),e),F(n,t))}),$t=U(N("intersperse",function(t,e){for(var n=[],r=0,i=e.length;r<i;)r===i-1?n.push(e[r]):n.push(e[r],t),r+=1;return n})),Qt=U(function(t,e){return null!=e&&e.constructor===t||e instanceof t}),Kt=B(function(t){return!!y(t)||!!t&&("object"==typeof t&&(!(t instanceof String)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}),Xt=B(function(t){return null==t}),Yt=function(){var t=!{toString:null}.propertyIsEnumerable("toString"),e=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],n=function(){return arguments.propertyIsEnumerable("length")}(),r=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1};return B("function"!=typeof Object.keys||n?function(i){if(Object(i)!==i)return[];var o,u,s=[],a=n&&v(i);for(o in i)!p(o,i)||a&&"length"===o||(s[s.length]=o);if(t)for(u=e.length-1;u>=0;)o=e[u],p(o,i)&&!r(s,o)&&(s[s.length]=o),u-=1;return s}:function(t){return Object(t)!==t?[]:Object.keys(t)})}(),Jt=B(function(t){var e,n=[];for(e in t)n[n.length]=e;return n}),Zt=B(function(t){return null!=t&&Qt(Number,t.length)?t.length:NaN}),te=U(function(t,e){return t<e}),ee=U(function(t,e){return t<=e}),ne=H(function(t,e,n){for(var r=0,i=n.length,o=[],u=[e];r<i;)u=t(u[0],n[r]),o[r]=u[1],r+=1;return[u[0],o]}),re=H(function(t,e,n){for(var r=n.length-1,i=[],o=[e];r>=0;)o=t(o[0],n[r]),i[r]=o[1],r-=1;return[o[0],i]}),ie=U(function(t,e){return e.match(t)||[]}),oe=U(function(t,e){return g(t)?!g(e)||e<1?NaN:(t%e+e)%e:NaN}),ue=U(function(t,e){return e>t?e:t}),se=H(function(t,e,n){return t(n)>t(e)?n:e}),ae=U(function(t,e){return M({},t,e)}),ce=B(function(t){return M.apply(null,[{}].concat(t))}),le=H(function(t,e,n){var r,i={};for(r in e)p(r,e)&&(i[r]=p(r,n)?t(r,e[r],n[r]):e[r]);for(r in n)p(r,n)&&!p(r,i)&&(i[r]=n[r]);return i}),fe=U(function(t,e){return e<t?e:t}),he=H(function(t,e,n){return t(n)<t(e)?n:e}),pe=U(function(t,e){return t%e}),de=U(function(t,e){return t*e}),ve=U(function(t,e){switch(t){case 0:return function(){return e.call(this)};case 1:return function(t){return e.call(this,t)};case 2:return function(t,n){return e.call(this,t,n)};case 3:return function(t,n,r){return e.call(this,t,n,r)};case 4:return function(t,n,r,i){return e.call(this,t,n,r,i)};case 5:return function(t,n,r,i,o){return e.call(this,t,n,r,i,o)};case 6:return function(t,n,r,i,o,u){return e.call(this,t,n,r,i,o,u)};case 7:return function(t,n,r,i,o,u,s){return e.call(this,t,n,r,i,o,u,s)};case 8:return function(t,n,r,i,o,u,s,a){return e.call(this,t,n,r,i,o,u,s,a)};case 9:return function(t,n,r,i,o,u,s,a,c){return e.call(this,t,n,r,i,o,u,s,a,c)};case 10:return function(t,n,r,i,o,u,s,a,c,l){return e.call(this,t,n,r,i,o,u,s,a,c,l)};default:throw new Error("First argument to nAry must be a non-negative integer no greater than ten")}}),ye=B(function(t){return-t}),_e=U(s(V("any",G,ft))),ge=B(function(t){return!t}),me=U(function(t,e){var n=t<0?e.length+t:t;return j(e)?e.charAt(n):e[n]}),be=B(function(t){return function(){return me(t,arguments)}}),we=U(function(t,e){var n={};return n[t]=e,n}),Ee=B(k),je=B(function(t){var e,n=!1;return r(t.length,function(){return n?e:(n=!0,e=t.apply(this,arguments))})}),Ce=U(function(t,e){return t||e}),xe=function(){var t=function(e){return{value:e,map:function(n){return t(n(e))}}};return H(function(e,n,r){return e(function(e){return t(n(e))})(r).value})}(),Se=U(function(t,e){return[t,e]}),ke=U(function(t,e){for(var n=e,r=0;r<t.length;){if(null==n)return;n=n[t[r]],r+=1}return n}),Oe=H(function(t,e,n){return Et(t,ke(e,n))}),Ae=H(function(t,e,n){return e.length>0&&t(ke(e,n))}),Te=U(function(t,e){for(var n={},r=0;r<t.length;)t[r]in e&&(n[t[r]]=e[t[r]]),r+=1;return n}),Pe=U(function(t,e){for(var n={},r=0,i=t.length;r<i;){var o=t[r];n[o]=e[o],r+=1}return n}),Fe=U(function(t,e){var n={};for(var r in e)t(e[r],r,e)&&(n[r]=e[r]);return n}),De=U(function(t,e){return a([t],e)}),Re=U(function(t,e){return e[t]}),Ie=H(function(t,e,n){return null!=n&&p(e,n)?n[e]:t}),Le=H(function(t,e,n){return t(n[e])}),Me=U(function(t,e){for(var n=t.length,r=[],i=0;i<n;)r[i]=e[t[i]],i+=1;return r}),Ne=U(function(t,e){if(!m(t)||!m(e))throw new TypeError("Both arguments to range must be numbers");for(var n=[],r=t;r<e;)n.push(r),r+=1;return n}),Be=H(function(t,e,n){for(var r=n.length-1;r>=0;)e=t(e,n[r]),r-=1;return e}),Ue=B(P),He=H(function(t,e,n){return a(F(n,0,Math.min(t,n.length)),F(n,Math.min(n.length,t+e)))}),qe=H(function(t,e,n){return n.replace(t,e)}),Ve=B(function(t){return j(t)?t.split("").reverse().join(""):F(t).reverse()}),We=H(function(t,e,n){for(var r=0,i=n.length,o=[e];r<i;)e=t(e,n[r]),o[r+1]=e,r+=1;return o}),ze=H(function(t,e,n){return xe(t,ct(e),n)}),Ge=H(N("slice",function(t,e,n){return Array.prototype.slice.call(n,t,e)})),$e=U(function(t,e){return F(e).sort(t)}),Qe=U(function(t,e){return F(e).sort(function(e,n){var r=t(e),i=t(n);return r<i?-1:r>i?1:0})}),Ke=U(function(t,e){return[Ge(0,t,e),Ge(t,Zt(e),e)]}),Xe=U(function(t,e){if(t<=0)throw new Error("First argument to splitEvery must be a positive integer");for(var n=[],r=0;r<e.length;)n.push(Ge(r,r+=t,e));return n}),Ye=U(function(t,e){for(var n=0,r=e.length,i=[];n<r&&!t(e[n]);)i.push(e[n]),n+=1;return[i,F(e,n)]}),Je=U(function(t,e){return Number(t)-Number(e)}),Ze=N("tail",Ge(1,1/0)),tn=U(V("take",it,function(t,e){return Ge(0,t<0?1/0:t,e)})),en=U(function(t,e){for(var n=e.length-1;n>=0&&t(e[n]);)n-=1;return F(e,n+1,1/0)}),nn=U(V("takeWhile",ot,function(t,e){for(var n=0,r=e.length;n<r&&t(e[n]);)n+=1;return F(e,0,n)})),rn=U(function(t,e){return t(e),e}),on=U(function(t,e){var n,r=Number(e),i=0;if(r<0||isNaN(r))throw new RangeError("n must be a non-negative number");for(n=new Array(r);i<r;)n[i]=t(i),i+=1;return n}),un=B(function(t){var e=[];for(var n in t)p(n,t)&&(e[e.length]=[n,t[n]]);return e}),sn=B(function(t){var e=[];for(var n in t)e[e.length]=[n,t[n]];return e}),an=B(function(t){for(var e=0,n=[];e<t.length;){for(var r=t[e],i=0;i<r.length;)"undefined"==typeof n[i]&&(n[i]=[]),n[i].push(r[i]),i+=1;e+=1}return n}),cn=function(){var t="\t\n\v\f\r \u2028\u2029\ufeff",e="",n="function"==typeof String.prototype.trim;return B(n&&!t.trim()&&e.trim()?function(t){return t.trim()}:function(e){var n=new RegExp("^["+t+"]["+t+"]*"),r=new RegExp("["+t+"]["+t+"]*$");return e.replace(n,"").replace(r,"")})}(),ln=U(function(t,e){return r(t.length,function(){try{return t.apply(this,arguments)}catch(t){return e.apply(this,a([t],arguments))}})}),fn=B(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}),hn=B(function(t){return function(){return t(F(arguments))}}),pn=B(function(t){return ve(1,t)}),dn=U(function(t,e){return bt(t,function(){for(var n,r=1,i=e,o=0;r<=t&&"function"==typeof i;)n=r===t?arguments.length:o+i.length,i=i.apply(this,F(arguments,o,n)),r+=1,o=n;return i})}),vn=U(function(t,e){for(var n=t(e),r=[];n&&n.length;)r[r.length]=n[0],n=t(n[1]);return r}),yn=U(function(t,e){for(var n,r=0,i=e.length,o=[];r<i;)n=e[r],c(t,n,o)||(o[o.length]=n),r+=1;return o}),_n=H(function(t,e,n){return t(n)?n:e(n)}),gn=H(function(t,e,n){for(var r=n;!t(r);)r=e(r);return r}),mn=H(function(t,e,n){return st(ct(e),t,n)}),bn=U(function(t,e){return bt(e.length,function(){for(var n=[],r=0;r<e.length;)n.push(e[r].call(this,arguments[r])),r+=1;return t.apply(this,n.concat(F(arguments,e.length)))})}),wn=B(function(t){for(var e=Yt(t),n=e.length,r=[],i=0;i<n;)r[i]=t[e[i]],i+=1;return r}),En=B(function(t){var e,n=[];for(e in t)n[n.length]=t[e];return n}),jn=function(){var t=function(t){return{value:t,map:function(){return this}}};return U(function(e,n){return e(t)(n).value})}(),Cn=H(function(t,e,n){return t(n)?e(n):n}),xn=U(function(t,e){for(var n in t)if(p(n,t)&&!t[n](e[n]))return!1;return!0}),Sn=U(function(t,e){return bt(t.length,function(){return e.apply(this,a([t],arguments))})}),kn=U(function(t,e){for(var n,r=0,i=t.length,o=e.length,u=[];r<i;){for(n=0;n<o;)u[u.length]=[t[r],e[n]],n+=1;r+=1}return u}),On=U(function(t,e){for(var n=[],r=0,i=Math.min(t.length,e.length);r<i;)n[r]=[t[r],e[r]],r+=1;return n}),An=U(function(t,e){for(var n=0,r=Math.min(t.length,e.length),i={};n<r;)i[t[n]]=e[n],n+=1;return i}),Tn=H(function(t,e,n){for(var r=[],i=0,o=Math.min(e.length,n.length);i<o;)r[i]=t(e[i],n[i]),i+=1;return r}),Pn=ct(!1),Fn=ct(!0),Dn=function t(e,n,r,i){var o=function(o){for(var u=n.length,s=0;s<u;){if(e===n[s])return r[s];s+=1}n[s+1]=e,r[s+1]=o;for(var a in e)o[a]=i?t(e[a],n,r,!0):e[a];return o};switch(fn(e)){case"Object":return o({});case"Array":return o([]);case"Date":return new Date(e.valueOf());case"RegExp":return u(e);default:return e}},Rn=function(t){return U(function(e,n){return r(Math.max(0,e.length-n.length),function(){return e.apply(this,t(n,arguments))})})},In=function(t,e){return tn(t<e.length?e.length-t:0,e)},Ln=function t(e,n,r,o){if(Ht(e,n))return!0;if(fn(e)!==fn(n))return!1;if(null==e||null==n)return!1;if("function"==typeof e.equals||"function"==typeof n.equals)return"function"==typeof e.equals&&e.equals(n)&&"function"==typeof n.equals&&n.equals(e);switch(fn(e)){case"Arguments":case"Array":case"Object":if("function"==typeof e.constructor&&"Promise"===h(e.constructor))return e===n;break;case"Boolean":case"Number":case"String":if(typeof e!=typeof n||!Ht(e.valueOf(),n.valueOf()))return!1;break;case"Date":if(!Ht(e.valueOf(),n.valueOf()))return!1;break;case"Error":return e.name===n.name&&e.message===n.message;case"RegExp":if(e.source!==n.source||e.global!==n.global||e.ignoreCase!==n.ignoreCase||e.multiline!==n.multiline||e.sticky!==n.sticky||e.unicode!==n.unicode)return!1;break;case"Map":case"Set":if(!t(i(e.entries()),i(n.entries()),r,o))return!1;break;case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":break;case"ArrayBuffer":break;default:return!1}var u=Yt(e);if(u.length!==Yt(n).length)return!1;for(var s=r.length-1;s>=0;){if(r[s]===e)return o[s]===n;s-=1}for(r.push(e),o.push(n),s=u.length-1;s>=0;){var a=u[s];if(!p(a,n)||!t(n[a],e[a],r,o))return!1;s-=1}return r.pop(),o.pop(),!0},Mn=function(t){return function e(n){for(var r,i,o,u=[],s=0,a=n.length;s<a;){if(Kt(n[s]))for(r=t?e(n[s]):n[s],o=0,i=r.length;o<i;)u[u.length]=r[o],o+=1;else u[u.length]=n[s];s+=1}return u}},Nn=function(){function t(t,e,n){for(var r=0,i=n.length;r<i;){if(e=t["@@transducer/step"](e,n[r]),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}function e(t,e,n){for(var r=n.next();!r.done;){if(e=t["@@transducer/step"](e,r.value),e&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function n(t,e,n){return t["@@transducer/result"](n.reduce(_t(t["@@transducer/step"],t),e))}var r="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";return function(i,o,u){if("function"==typeof i&&(i=I(i)),Kt(u))return t(i,o,u);if("function"==typeof u.reduce)return n(i,o,u);if(null!=u[r])return e(i,o,u[r]());if("function"==typeof u.next)return e(i,o,u);throw new TypeError("reduce: list must be array or iterable")}}(),Bn=function(){var t={"@@transducer/init":Array,"@@transducer/step":function(t,e){return t.push(e),t},"@@transducer/result":d},e={"@@transducer/init":String,"@@transducer/step":function(t,e){return t+e},"@@transducer/result":d},n={"@@transducer/init":Object,"@@transducer/step":function(t,e){return M(t,Kt(e)?we(e[0],e[1]):e)},"@@transducer/result":d};return function(r){if(C(r))return r;if(Kt(r))return t;if("string"==typeof r)return e;if("object"==typeof r)return n;throw new Error("Cannot create transformer for "+r)}}(),Un=function(){function t(t,e){this.f=t,this.retained=[],this.xf=e}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.retain(t,e):this.flush(t,e)},t.prototype.flush=function(t,e){return t=Nn(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,e)},t.prototype.retain=function(t,e){return this.retained.push(e),t},U(function(e,n){return new t(e,n)})}(),Hn=function(){function t(t,e){this.xf=e,this.f=t,this.inputs={}}return t.prototype["@@transducer/init"]=R.init,t.prototype["@@transducer/result"]=function(t){var e;for(e in this.inputs)if(p(e,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[e]),t["@@transducer/reduced"])){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},t.prototype["@@transducer/step"]=function(t,e){var n=this.f(e);return this.inputs[n]=this.inputs[n]||[n,[]],this.inputs[n][1]=pt(e,this.inputs[n][1]),t},U(function(e,n){return new t(e,n)})}(),qn=B(function(t){return bt(t.length,function(){var e=0,n=arguments[0],r=arguments[arguments.length-1],i=F(arguments);return i[0]=function(){var t=n.apply(this,a(arguments,[e,r]));return e+=1,t},t.apply(this,i)})}),Vn=B(function(t){return ve(2,t)}),Wn=B(function(t){return null!=t&&"function"==typeof t.clone?t.clone():Dn(t,[],[],!0)}),zn=B(function(t){return bt(t.length,t)}),Gn=U(V("drop",Q,function(t,e){return Ge(Math.max(0,t),1/0,e)})),$n=U(V("dropLast",K,In)),Qn=U(V("dropLastWhile",Un,W)),Kn=U(function(t,e){return Ln(t,e,[],[])}),Xn=U(V("filter",J,function(t,e){return b(e)?Nn(function(n,r){return t(e[r])&&(n[r]=e[r]),n},{},Yt(e)):l(t,e)})),Yn=B(Mn(!0)),Jn=B(function(t){return zn(function(e,n){var r=F(arguments);return r[0]=n,r[1]=e,t.apply(this,r)})}),Zn=me(0),tr=Ge(0,-1),er=H(function(t,e,n){var r,i;e.length>n.length?(r=e,i=n):(r=n,i=e);for(var o=[],u=0;u<i.length;)c(t,i[u],r)&&(o[o.length]=i[u]),u+=1;return yn(t,o)}),nr=H(function(t,e,n){return C(t)?Nn(e(t),t["@@transducer/init"](),n):Nn(e(Bn(t)),Dn(t,[],[],!1),n)}),rr=B(function(t){for(var e=Yt(t),n=e.length,r=0,i={};r<n;){var o=e[r],u=t[o],s=p(u,i)?i[u]:i[u]=[];s[s.length]=o,r+=1}return i}),ir=B(function(t){for(var e=Yt(t),n=e.length,r=0,i={};r<n;){var o=e[r];i[t[o]]=o,r+=1}return i}),or=B(function(t){return null!=t&&Kn(t,Ot(t))}),ur=me(-1),sr=U(function(t,e){if("function"!=typeof e.lastIndexOf||y(e)){for(var n=e.length-1;n>=0;){if(Kn(e[n],t))return n;n-=1}return-1}return e.lastIndexOf(t)}),ar=U(V("map",rt,function(t,e){switch(Object.prototype.toString.call(e)){case"[object Function]":return bt(e.length,function(){return t.call(this,e.apply(this,arguments))});case"[object Object]":return Nn(function(n,r){return n[r]=t(e[r]),n},{},Yt(e));default:return x(t,e)}})),cr=U(function(t,e){return Nn(function(n,r){return n[r]=t(e[r],r,e),n},{},Yt(e))}),lr=H(function(t,e,n){return le(function(e,n,r){return t(n,r)},e,n)}),fr=Rn(a),hr=Rn(Jn(a)),pr=H(function(t,e,n){return Kn(ke(t,n),e)}),dr=U(function(t,e){return ar(Re(t),e)}),vr=bn(x,[Pe,qt]),yr=H(function(t,e,n){return Le(Kn(e),t,n)}),_r=H(function(t,e,n){return Le(Qt(t),e,n)}),gr=H(Nn),mr=q(4,[],function(t,e,n,r){return Nn(function(r,i){var o=n(i);return r[o]=t(p(o,r)?r[o]:e,i),r},{},r)}),br=U(function(t,e){return Xn(s(t),e)}),wr=U(function(t,e){return on(ct(t),e)}),Er=gr(ut,0),jr=U(function(t,e){return Gn(t>=0?e.length-t:0,e)}),Cr=bt(4,function(t,e,n,r){return Nn(t("function"==typeof e?I(e):e),n,r)}),xr=H(function(t,e,n){return yn(t,a(e,n))}),Sr=U(function(t,e){return xn(ar(Kn,t),e)}),kr=function(){var t=function(t){return{"@@transducer/init":R.init,"@@transducer/result":function(e){return t["@@transducer/result"](e)},"@@transducer/step":function(e,n){var r=t["@@transducer/step"](e,n);return r["@@transducer/reduced"]?f(r):r}}};return function(e){var n=t(e);return{"@@transducer/init":R.init,"@@transducer/result":function(t){return n["@@transducer/result"](t)},"@@transducer/step":function(t,e){return Kt(e)?Nn(n,t,e):Nn(n,t,[e])}}}}(),Or=function(t,e,n){var r,i;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(r=1/e;n<t.length;){if(i=t[n],0===i&&1/i===r)return n;n+=1}return-1}if(e!==e){for(;n<t.length;){if(i=t[n],"number"==typeof i&&i!==i)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(Kn(t[n],e))return n;n+=1}return-1},Ar=U(function(t,e){return ar(t,kr(e))}),Tr=B(function(t){return bt(gr(ue,0,dr("length",t)),function(){for(var e=0,n=t.length;e<n;){if(!t[e].apply(this,arguments))return!1;e+=1}return!0})}),Pr=B(function(t){for(var e=t.length,n=0;n<e;){if(Or(t,t[n],n+1)>=0)return!1;n+=1}return!0}),Fr=B(function(t){return bt(gr(ue,0,dr("length",t)),function(){for(var e=0,n=t.length;e<n;){if(t[e].apply(this,arguments))return!0;e+=1}return!1})}),Dr=U(function(t,e){return"function"==typeof t.ap?t.ap(e):"function"==typeof t?bt(Math.max(t.length,e.length),function(){return t.apply(this,arguments)(e.apply(this,arguments))}):Nn(function(t,n){return a(t,ar(n,e))},[],t)}),Rr=B(function t(e){return e=ar(function(e){return"function"==typeof e?e:t(e)},e),bt(gr(ue,0,dr("length",wn(e))),function(){var t=arguments;return ar(function(e){return dt(e,t)},e)})}),Ir=zn(function(t){return t.apply(this,F(arguments,1))}),Lr=U(V("chain",Ar,function(t,e){return"function"==typeof e?function(){return e.call(this,t.apply(this,arguments)).apply(this,arguments)}:Mn(!1)(ar(t,e))})),Mr=B(function(t){var e=gr(ue,0,ar(function(t){return t[0].length},t));return r(e,function(){for(var e=0;e<t.length;){if(t[e][0].apply(this,arguments))return t[e][1].apply(this,arguments);e+=1}})}),Nr=U(function(t,e){if(t>10)throw new Error("Constructor with greater than ten arguments");return 0===t?function(){return new e}:zn(ve(t,function(t,n,r,i,o,u,s,a,c,l){switch(arguments.length){case 1:return new e(t);case 2:return new e(t,n);case 3:return new e(t,n,r);case 4:return new e(t,n,r,i);case 5:return new e(t,n,r,i,o);case 6:return new e(t,n,r,i,o,u);case 7:return new e(t,n,r,i,o,u,s);case 8:return new e(t,n,r,i,o,u,s,a);case 9:return new e(t,n,r,i,o,u,s,a,c);case 10:return new e(t,n,r,i,o,u,s,a,c,l)}}))}),Br=U(function(t,e){return bt(gr(ue,0,dr("length",e)),function(){var n=arguments,r=this;return t.apply(r,x(function(t){return t.apply(r,n)},e))})}),Ur=mr(function(t,e){return t+1},0),Hr=U(V("dropRepeatsWith",X,function(t,e){var n=[],r=1,i=e.length;if(0!==i)for(n[0]=e[0];r<i;)t(ur(n),e[r])||(n[n.length]=e[r]),r+=1;return n})),qr=H(function(t,e,n){return Kn(t(e),t(n))}),Vr=H(function(t,e,n){return Kn(e[t],n[t])}),Wr=U(V("groupBy",Hn,mr(function(t,e){return null==t&&(t=[]),t.push(e),t},null))),zr=mr(function(t,e){return e},null),Gr=U(function(t,e){return"function"!=typeof e.indexOf||y(e)?Or(e,t,0):e.indexOf(t)}),$r=B(function(t){return Br(o,t)}),Qr=U(function(t,e){return function(n){return function(r){return ar(function(t){return e(t,r)},n(t(r)))}}}),Kr=B(function(t){return Qr(me(t),mn(t))}),Xr=B(function(t){return Qr(ke(t),yt(t))}),Yr=B(function(t){return Qr(Re(t),vt(t))}),Jr=U(function(t,e){var n=bt(t,e);return bt(t,function(){return Nn(Dr,ar(n,arguments[0]),F(arguments,1))})}),Zr=B(function(t){return Er(t)/t.length}),ti=B(function(t){var e=t.length;if(0===e)return NaN;var n=2-e%2,r=(e-n)/2;return Zr(F(t).sort(function(t,e){return t<e?-1:t>e?1:0}).slice(r,r+n))}),ei=$r([Xn,br]),ni=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return r(arguments[0].length,gr(O,arguments[0],Ze(arguments)))},ri=function(){if(0===arguments.length)throw new Error("pipeP requires at least one argument");return r(arguments[0].length,gr(A,arguments[0],Ze(arguments)))},ii=gr(de,1),oi=U(function(t,e){return"function"==typeof e.sequence?e.sequence(t):Be(function(t,e){return Dr(ar(De,e),t)},t([]),e)}),ui=H(function(t,e,n){return oi(t,ar(e,n))}),si=Lr(d),ai=function(t,e){return Or(e,t,0)>=0},ci=function t(e,n){var r=function(r){var i=n.concat([e]);return ai(r,i)?"<Circular>":t(r,i)},i=function(t,e){return x(function(e){return T(e)+": "+r(t[e])},e.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+x(r,e).join(", ")+"))";case"[object Array]":return"["+x(r,e).concat(i(e,br(function(t){return/^\d+$/.test(t)},Yt(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+r(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?r(NaN):T(D(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+r(e.valueOf())+")":1/e===-(1/0)?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+r(e.valueOf())+")":T(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var o=e.toString();if("[object Object]"!==o)return o}return"{"+i(e,Yt(e)).join(", ")+"}"}},li=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return ni.apply(this,Ve(arguments))},fi=function(){return li.apply(this,De(qt,ar(Lr,arguments)))},hi=function(){if(0===arguments.length)throw new Error("composeP requires at least one argument");return ri.apply(this,Ve(arguments))},pi=B(function(t){return Nr(t.length,t)}),di=U(ai),vi=U(function(t,e){for(var n=[],r=0,i=t.length;r<i;)ai(t[r],e)||ai(t[r],n)||(n[n.length]=t[r]),r+=1;return n}),yi=B(V("dropRepeats",X(Kn),Hr(Kn))),_i=B(function(t){return Jr(t.length,t)}),gi=U(function(t,e){var n={};for(var r in e)ai(r,t)||(n[r]=e[r]);return n}),mi=function(){return fi.apply(this,Ve(arguments))},bi=B(function(t){return ci(t,[])}),wi=U(function(t,e){return br(Jn(ai)(t),e)}),Ei=function(){function t(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}function e(t,e,n){var r,i,o=typeof t;switch(o){case"string":case"number":return 0!==t||n._items["-0"]||1/t!==-(1/0)?null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),i=n._nativeSet.size,i>r):n._nativeSet.has(t):o in n._items?t in n._items[o]?!e:(e&&(n._items[o][t]=!0),e):(e&&(n._items[o]={},n._items[o][t]=!0),e):(e&&(n._items["-0"]=!0),e);case"boolean":if(o in n._items){var u=t?1:0;return n._items[o][u]?!e:(e&&(n._items[o][u]=!0),e)}return e&&(n._items[o]=t?[!1,!0]:[!0,!1]),e;case"function":return null!==n._nativeSet?e?(r=n._nativeSet.size,n._nativeSet.add(t),i=n._nativeSet.size,i>r):n._nativeSet.has(t):o in n._items?ai(t,n._items[o])?!e:(e&&n._items[o].push(t),e):(e&&(n._items[o]=[t]),e);case"undefined":return n._items[o]?!e:(e&&(n._items[o]=!0),e);case"object":if(null===t)return n._items.null?!e:(e&&(n._items.null=!0),e);default:return o=Object.prototype.toString.call(t),o in n._items?ai(t,n._items[o])?!e:(e&&n._items[o].push(t),e):(e&&(n._items[o]=[t]),e)}}return t.prototype.add=function(t){return e(t,!0,this)},t.prototype.has=function(t){return e(t,!1,this)},t}(),ji=U(function(t,e){return _(t)?function(){return t.apply(this,arguments)&&e.apply(this,arguments)}:_i(lt)(t,e)}),Ci=_i(ge),xi=U(function(t,e){return _(t)?function(){return t.apply(this,arguments)||e.apply(this,arguments)}:_i(Ce)(t,e)}),Si=U(function(t,e){return bt(t+1,function(){var n=arguments[t];if(null!=n&&Qt(Function,n[e]))return n[e].apply(n,F(arguments,0,t));throw new TypeError(bi(n)+' does not have a method named "'+e+'"')})}),ki=Si(1,"join"),Oi=B(function(t){
var e={};return r(t.length,function(){var n=bi(arguments);return p(n,e)||(e[n]=t.apply(this,arguments)),e[n]})}),Ai=Si(1,"split"),Ti=U(function(t,e){if(!E(t))throw new TypeError("test requires a value of type RegExp as its first argument; received "+bi(t));return u(t).test(e)}),Pi=Si(0,"toLowerCase"),Fi=Si(0,"toUpperCase"),Di=U(function(t,e){for(var n,r,i=new Ei,o=[],u=0;u<e.length;)r=e[u],n=t(r),i.add(n)&&o.push(r),u+=1;return o}),Ri=Jn(Si(1,"concat")),Ii=U(function(t,e){return Ri(vi(t,e),vi(e,t))}),Li=H(function(t,e,n){return Ri(jt(t,e,n),jt(t,n,e))}),Mi=Di(qt),Ni=U(function(t,e){var n,r;return t.length>e.length?(n=t,r=e):(n=e,r=t),Mi(l(Jn(ai)(n),r))}),Bi=U(li(Mi,a)),Ui={F:Pn,T:Fn,__:t,add:ut,addIndex:qn,adjust:st,all:at,allPass:Tr,allUniq:Pr,always:ct,and:lt,any:ft,anyPass:Fr,ap:Dr,aperture:ht,append:pt,apply:dt,applySpec:Rr,assoc:vt,assocPath:yt,binary:Vn,bind:_t,both:ji,call:Ir,chain:Lr,clamp:gt,clone:Wn,comparator:mt,complement:Ci,compose:li,composeK:fi,composeP:hi,concat:Ri,cond:Mr,construct:pi,constructN:Nr,contains:di,converge:Br,countBy:Ur,curry:zn,curryN:bt,dec:wt,defaultTo:Et,difference:vi,differenceWith:jt,dissoc:Ct,dissocPath:xt,divide:St,drop:Gn,dropLast:$n,dropLastWhile:Qn,dropRepeats:yi,dropRepeatsWith:Hr,dropWhile:kt,either:xi,empty:Ot,eqBy:qr,eqProps:Vr,equals:Kn,evolve:At,filter:Xn,find:Tt,findIndex:Pt,findLast:Ft,findLastIndex:Dt,flatten:Yn,flip:Jn,forEach:Rt,fromPairs:It,groupBy:Wr,groupWith:Lt,gt:Mt,gte:Nt,has:Bt,hasIn:Ut,head:Zn,identical:Ht,identity:qt,ifElse:Vt,inc:Wt,indexBy:zr,indexOf:Gr,init:tr,insert:zt,insertAll:Gt,intersection:Ni,intersectionWith:er,intersperse:$t,into:nr,invert:rr,invertObj:ir,invoker:Si,is:Qt,isArrayLike:Kt,isEmpty:or,isNil:Xt,join:ki,juxt:$r,keys:Yt,keysIn:Jt,last:ur,lastIndexOf:sr,length:Zt,lens:Qr,lensIndex:Kr,lensPath:Xr,lensProp:Yr,lift:_i,liftN:Jr,lt:te,lte:ee,map:ar,mapAccum:ne,mapAccumRight:re,mapObjIndexed:cr,match:ie,mathMod:oe,max:ue,maxBy:se,mean:Zr,median:ti,memoize:Oi,merge:ae,mergeAll:ce,mergeWith:lr,mergeWithKey:le,min:fe,minBy:he,modulo:pe,multiply:de,nAry:ve,negate:ye,none:_e,not:ge,nth:me,nthArg:be,objOf:we,of:Ee,omit:gi,once:je,or:Ce,over:xe,pair:Se,partial:fr,partialRight:hr,partition:ei,path:ke,pathEq:pr,pathOr:Oe,pathSatisfies:Ae,pick:Te,pickAll:Pe,pickBy:Fe,pipe:ni,pipeK:mi,pipeP:ri,pluck:dr,prepend:De,product:ii,project:vr,prop:Re,propEq:yr,propIs:_r,propOr:Ie,propSatisfies:Le,props:Me,range:Ne,reduce:gr,reduceBy:mr,reduceRight:Be,reduced:Ue,reject:br,remove:He,repeat:wr,replace:qe,reverse:Ve,scan:We,sequence:oi,set:ze,slice:Ge,sort:$e,sortBy:Qe,split:Ai,splitAt:Ke,splitEvery:Xe,splitWhen:Ye,subtract:Je,sum:Er,symmetricDifference:Ii,symmetricDifferenceWith:Li,tail:Ze,take:tn,takeLast:jr,takeLastWhile:en,takeWhile:nn,tap:rn,test:Ti,times:on,toLower:Pi,toPairs:un,toPairsIn:sn,toString:bi,toUpper:Fi,transduce:Cr,transpose:an,traverse:ui,trim:cn,tryCatch:ln,type:fn,unapply:hn,unary:pn,uncurryN:dn,unfold:vn,union:Bi,unionWith:xr,uniq:Mi,uniqBy:Di,uniqWith:yn,unless:_n,unnest:si,until:gn,update:mn,useWith:bn,values:wn,valuesIn:En,view:jn,when:Cn,where:xn,whereEq:Sr,without:wi,wrap:Sn,xprod:kn,zip:On,zipObj:An,zipWith:Tn};"object"==typeof n?e.exports=Ui:"function"==typeof define&&define.amd?define(function(){return Ui}):this.R=Ui}).call(this)},{}],92:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){var e={selectedTab:t};return{type:y.SELECT_TAB,payload:e}}function o(t){var e={selectedCountry:t};return{type:y.SELECT_COUNTRY,payload:e}}function u(t){var e={path:t};return{type:y.CHANGE_PAGE,payload:e}}function s(t){return{type:y.TOGGLE_LOADING,payload:function(e){return{isLoading:t}}}}Object.defineProperty(n,"__esModule",{value:!0}),n.fetchStrikes=void 0,n.selectTab=i,n.selectCountry=o,n.changePage=u,n.setLoading=s;var a=t("ramda"),c=r(a),l=t("bluebird"),f=r(l),h=t("isomorphic-fetch"),p=r(h),d=t("querystring"),v=r(d),y=t("./constants"),_=c.default.when(c.default.is(Function)),g=function(t,e){return c.default.map(_(function(e){return e(t)}),e)};n.fetchStrikes=function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return{type:y.FETCH_STRIKES,payload:function(e){var n=g(e,t),r=v.default.stringify(n);return c.default.contains(r,e.fetchedQueries)?f.default.resolve({}):(0,p.default)("/strikes?"+r).then(function(t){if(t.ok)return t.json()}).then(c.default.merge({query:r})).catch(console.log)}}}},{"./constants":93,bluebird:2,"isomorphic-fetch":7,querystring:6,ramda:91}],93:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});n.SELECT_TAB=Symbol("SELECT_TAB"),n.SELECT_COUNTRY=Symbol("SELECT_COUNTRY"),n.CHANGE_PAGE=Symbol("CHANGE_PAGE"),n.TOGGLE_LOADING=Symbol("TOGGLE_LOADING"),n.FETCH_STRIKES=Symbol("FETCH_STRIKES")},{}],94:[function(t,e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.appCtrl=void 0;var r=t("./action-creators"),i={0:"yemen",1:"pakistan",2:"somalia"};n.appCtrl=function(t,e){var n=(e.store,e.dispatch);return{is:"my-app",selectTab:function(t){var e=t.target.id.split("tab")[1],o=i[e];n((0,r.selectTab)(e)),n((0,r.selectCountry)(o)),"stats"!==this.page&&n((0,r.fetchStrikes)({takeLast:20,country:o}))},properties:{page:{type:String,reflectToAttribute:!0,observer:"_pageChanged"},id:{type:String,reflectToAttribute:!0,observer:"_subrouteChanged"}},observers:["_routePageChanged(routeData.page)"],_routePageChanged:function(t){this.page=t||"map"},_pageChanged:function(e){t(e),this.importHref(this.resolveUrl("./pages/"+e+"/"+e+".html"),null,null,!0)}}}},{"./action-creators":92}],95:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.routerFactory=void 0;var i=t("ramda"),o=r(i),u=t("./action-creators");n.routerFactory=function(t,e){var n=t.dispatch;return function(t){n((0,u.fetchStrikes)(o.default.path(["data"],e[t]))),n((0,u.changePage)("/"+t))}}},{"./action-creators":92,ramda:91}],96:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){return y(t)?h.default.merge(b,t(b)):h.default.merge(b,t)}function u(t){var e=t(b).then(function(t){var e=void 0;return t.query&&b.fetchedQueries.push(t.query),b.fetchedQueries=h.default.dropRepeats(b.fetchedQueries),t.strikes&&(e=(0,p.normalize)(t.strikes,(0,p.arrayOf)(_),{mergeIntoEntity:d.mergeIntoEntity})),b.result=h.default.concat(b.result,e.result),b.entities.strikes=h.default.merge(w(b)||{},w(e)||{}),console.log(b),b});return l.default.fromPromise(e)}function s(t){var e=E[t.type];if(e)return b=e(t.payload),g.plug(l.default.constant(b));var n=j[t.type];return n?g.plug(n(t.payload)):void 0}Object.defineProperty(n,"__esModule",{value:!0}),n.store=void 0;var a;n.dispatch=s;var c=t("baconjs"),l=r(c),f=t("ramda"),h=r(f),p=t("normalizr"),d=t("./utils"),v=t("./constants"),y=h.default.is(Function),_=new p.Schema("strikes",{idAttribute:"_id"}),g=new l.default.Bus,m=n.store=g.toProperty(),b={selectedTab:"0",selectedCountry:"yemen",incidents:[],result:[],entities:{strikes:{}},fetchedQueries:[],isLoading:!0},w=h.default.path(["entities","strikes"]),E=(a={},i(a,v.SELECT_COUNTRY,o),i(a,v.SELECT_TAB,o),i(a,v.CHANGE_PAGE,o),a),j=i({},v.FETCH_STRIKES,u);n.default={store:m,dispatch:s}},{"./constants":93,"./utils":97,baconjs:1,normalizr:12,ramda:91}],97:[function(t,e,n){"use strict";function r(t,e,n){var r;for(r in e)e.hasOwnProperty(r)&&(t.hasOwnProperty(r)&&!(0,i.equals)(t[r],e[r])?o(t[r])&&o(e[r])?(0,i.merge)(t[r],e[r]):console.warn("Unequal data!"):t[r]=e[r])}Object.defineProperty(n,"__esModule",{value:!0}),n.mergeIntoEntity=r;var i=t("ramda"),o=(0,i.is)(Object)},{ramda:91}],98:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=t("./app/store"),o=r(i),u=t("./app/router"),s=t("./app/controller"),a=t("./pages/map/map"),c=t("./pages/stats/stats"),l=t("./pages/list/list"),f=(0,u.routerFactory)(o.default,{map:a.mapRouteSpec,list:l.listRouteSpec,stats:c.statsRouteSpec});window.appCtrl=(0,s.appCtrl)(f,o.default),window.mapCtrl=(0,a.mapCtrl)(o.default),window.statsCtrl=(0,c.statsCtrl)(o.default),window.listCtrl=(0,l.listCtrl)(o.default)},{"./app/controller":94,"./app/router":95,"./app/store":96,"./pages/list/list":99,"./pages/map/map":101,"./pages/stats/stats":105}],99:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.listCtrl=n.listRouteSpec=void 0;var i=t("../selectors"),o=t("ramda"),u=r(o),s=n.listRouteSpec={data:{country:function(t){return t.selectedCountry},takeLast:15},path:"/list"};n.listCtrl=function(t){var e=t.store;t.dispatch;return{is:"incident-list",properties:{incidents:Array,isLoading:{type:Boolean,value:!0}},updateState:function(t){if(t.path===s.path){var e=u.default.takeLast(s.takeLast,(0,i.strikesByCountry)(t));if(e&&0!==e.length){this.isLoading=t.isLoading,this.incidents=e;var n=this.$$("iron-list");n.notifyResize()}}},ready:function(){var t=this;e.onValue(function(e){t.updateState(e)})}}}},{"../selectors":102,ramda:91}],100:[function(t,e,n){e.exports=[{featureType:"water",elementType:"all",stylers:[{visibility:"simplified"},{hue:"#e9ebed"},{saturation:-78},{lightness:67}]},{featureType:"landscape",elementType:"all",stylers:[{visibility:"simplified"},{hue:"#ffffff"},{saturation:-100},{lightness:100}]},{featureType:"road",elementType:"geometry",stylers:[{visibility:"simplified"},{hue:"#bbc0c4"},{saturation:-93},{lightness:31}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"},{hue:"#ffffff"},{saturation:-100},{lightness:100}]},{featureType:"road.local",elementType:"geometry",stylers:[{visibility:"simplified"},{hue:"#e9ebed"},{saturation:-90},{lightness:-8}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"on"},{hue:"#e9ebed"},{saturation:10},{lightness:69}]},{featureType:"administrative.locality",elementType:"all",stylers:[{visibility:"on"},{hue:"#2c2e33"},{saturation:7},{lightness:19}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"},{hue:"#bbc0c4"},{saturation:-93},{lightness:31}]},{featureType:"road.arterial",elementType:"labels",stylers:[{visibility:"simplified"},{hue:"#bbc0c4"},{saturation:-93},{lightness:-2}]}]},{}],101:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t){return"<div>\n    <p>"+t.narrative+"</p>\n    <p>"+(t.town||t.location)+"</p>\n    </div>"}Object.defineProperty(n,"__esModule",{value:!0}),n.mapCtrl=n.mapRouteSpec=void 0;var o=t("ramda"),u=r(o),s=t("../selectors"),a=t("./map-style"),c=r(a),l=n.mapRouteSpec={data:{takeLast:150},path:"/map"},f=u.default.when(u.default.compose(u.default.not,u.default.isNil),u.default.compose(u.default.takeLast(l.takeLast),u.default.values));n.mapCtrl=function(t){var e=t.store;t.dispatch;return{is:"drone-map",updateState:function(t,e){if(e.path===l.path){var n=(0,s.strikesByCountry)(e);if(n&&0!==n.length){var r=f(e.entities.strikes),o=r.map(function(t,e){var n=document.createElement("google-map-marker");return n.latitude=t.lat,n.longitude=t.lon,n.clickEvents=!0,n.title=t.location,n.innerHTML=i(t),n});o.map(function(e){return t.appendChild(e)}),t.resize(),t.latitude=n[0].lat,t.longitude=n[0].lon}}},ready:function(){var t=this,n=this.$$("#strikes-map");n.styles=c.default,e.onValue(function(e){return t.updateState(n,e)})}}}},{"../selectors":102,"./map-style":100,ramda:91}],102:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.strikesByCountry=void 0;var i=t("ramda"),o=r(i);n.strikesByCountry=function(t){return o.default.filter(function(e){return o.default.toLower(e.country)===t.selectedCountry})(o.default.values(t.entities.strikes))}},{ramda:91}],103:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.bubbleChartLabels=n.bubbleChartCols=n.chartCols=void 0;var i=t("ramda"),o=r(i),u=(n.chartCols=[{label:"Location",type:"string"},{label:"Lives lost",type:"number"}],n.bubbleChartCols=[{label:"Location",type:"string"},{label:"Civilians",type:"number"},{label:"Injuries",type:"number"},{label:"Country",type:"string"},{label:"Deaths",type:"number"}]);n.bubbleChartLabels=o.default.map(o.default.compose(o.default.toLower,o.default.path(["label"])))(u)},{ramda:91}],104:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.getTotalInjuries=n.getTotalCivilDeaths=n.getTotalDeaths=n.pickBubbleChartValues=n.pickBubbleChartData=n.sumDeathsForLocations=void 0;var i=t("ramda"),o=r(i),u=t("./options"),s=(n.sumDeathsForLocations=o.default.memoize(o.default.compose(o.default.values,o.default.reduce(function(t,e){if(!e.location)return t;var n=t[e.location];return t[e.location]=n?o.default.merge(n,{deaths:n.deaths+e.deaths}):e,t},{}),o.default.map(function(t){return t.deaths=t.deaths,t}),o.default.map(o.default.pick(["location","deaths"])))),n.pickBubbleChartData=o.default.memoize(o.default.map(o.default.pick(u.bubbleChartLabels))));n.pickBubbleChartValues=o.default.compose(o.default.map(o.default.values),s),n.getTotalDeaths=o.default.memoize(o.default.compose(o.default.sum,o.default.map(o.default.path(["deaths"])))),n.getTotalCivilDeaths=o.default.memoize(o.default.compose(o.default.sum,o.default.map(o.default.path(["civilians"])))),n.getTotalInjuries=o.default.memoize(o.default.compose(o.default.sum,o.default.map(o.default.path(["injuries"]))))},{"./options":103,ramda:91}],105:[function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(n,"__esModule",{value:!0}),n.statsCtrl=n.statsRouteSpec=void 0;var i=t("ramda"),o=r(i),u=t("./options"),s=t("./selectors"),a=n.statsRouteSpec={path:"/stats"};n.statsCtrl=function(t){var e=t.store;return{is:"drone-stats",properties:{cols:Array,rows:Array,deadlyArea:Object,bubbleChartData:Array},updateState:function(t,e){if(t===a.path){var n=(0,s.sumDeathsForLocations)(e);this.deadlyArea=n.reduce(function(t,e){return t.deaths>e.deaths?t:e}),this.cols=u.chartCols,this.rows=o.default.map(o.default.values,n);var r=(0,s.pickBubbleChartValues)(e);this.bubbleRows=r,this.bubbleCols=u.bubbleChartCols,this.totalDeaths=(0,s.getTotalDeaths)((0,s.pickBubbleChartData)(e)),this.totalCivilDeaths=(0,s.getTotalCivilDeaths)((0,s.pickBubbleChartData)(e)),this.totalInjuries=(0,s.getTotalInjuries)((0,s.pickBubbleChartData)(e))}},ready:function(){var t=this;e.onValue(function(e){var n=o.default.values(e.entities.strikes);n&&0!==n.length&&t.updateState(e.path,n)})}}}},{"./options":103,"./selectors":104,ramda:91}]},{},[98]);