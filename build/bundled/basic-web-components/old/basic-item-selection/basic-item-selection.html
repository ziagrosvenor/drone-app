<html><head><link rel="import" href="../basic-aspect/basic-aspect.html">

<script>window.Basic=window.Basic||{},window.Basic.ItemSelection={contribute:{applySelection:function(e,t){},get canSelectNext(){return this._canSelectNext},set canSelectNext(e){this._canSelectNext=e},get canSelectPrevious(){return this._canSelectPrevious},set canSelectPrevious(e){this._canSelectPrevious=e},itemAdded:function(e){this.collective.applySelection(e,e===this.collective.selectedItem)},itemsChanged:function(){var e=this.collective.items.indexOf(this.collective.selectedItem);e<0&&(this.collective.selectedItem=null,this.collective.selectionRequired&&setTimeout(function(){this._ensureSelection()}.bind(this)))},get selectedItem(){return this._selectedItem},set selectedItem(e){var t=this._selectedItem;t&&this.collective.applySelection(t,!1),this._selectedItem=e,e&&this.collective.applySelection(e,!0);var c=this.collective.indexOfItem(e);this._updatePossibleNavigations(c);var i=this.collective.outermostAttached;if(i){var l=new CustomEvent("selected-item-changed",{bubbles:!0,detail:{selectedItem:e,previousItem:t,value:e}});i.dispatchEvent(l)}},get selectedIndex(){var e=this.collective.selectedItem;if(null==e)return-1;var t=this.collective.indexOfItem(e);return t},set selectedIndex(e){var t,c=this.collective.items;t=e<0||0===c.length?null:c[e],this.collective.selectedItem=t;var i=this.collective.outermostAttached;if(i){var l=new CustomEvent("selected-index-changed",{bubbles:!0,detail:{selectedIndex:e,value:e}});i.dispatchEvent(l)}},selectFirst:function(){return this._selectIndex(0)},get selectionRequired(){return this._selectionRequired},set selectionRequired(e){this._selectionRequired=e,this._ensureSelection()},selectLast:function(){return this._selectIndex(this.collective.items.length-1)},selectNext:function(){return this._selectIndex(this.collective.selectedIndex+1)},selectPrevious:function(){return this._selectIndex(this.collective.selectedIndex-1)}},_ensureSelection:function(){!this.collective.selectedItem&&this.collective.items&&this.collective.items.length>0&&(this.collective.selectedIndex=0)},name:"ItemSelection",_selectIndex:function(e){var t=Math.max(Math.min(e,this.collective.items.length-1),0),c=this.collective.selectedIndex;return c!==t&&(this.collective.selectedIndex=t,!0)},_updatePossibleNavigations:function(e){var t,c,i=this.collective.items;null==i||0===i.length?(t=!1,c=!1):1===i.length?(t=!0,c=!0):(c=e>0,t=e<i.length-1),this.collective.canSelectNext=t,this.collective.canSelectPrevious=c},_selectedItem:null},Polymer({aspects:[Basic.ItemSelection],behaviors:[Basic.Aspect],is:"basic-item-selection",properties:{selectedIndex:{type:Number},selectedItem:{type:Object},selectionRequired:{type:Boolean,observer:"selectionRequiredChanged",value:!1}},selectFirst:function(){this.collective.selectFirst()},selectionRequiredChanged:function(e){this.collective.selectionRequired=e},selectLast:function(){this.collective.selectLast()},selectNext:function(){this.collective.selectNext()},selectPrevious:function(){this.collective.selectPrevious()},get selectedIndex(){if(this._readied)return this.collective.selectedIndex},get selectedItem(){return this.collective.selectedItem}});</script>
</head><body></body></html>